{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable jsdoc/require-returns */\n\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n/* eslint-disable jsdoc/require-param */\n\n/* eslint-disable valid-jsdoc */\n\n/**\n * Chart legend\n */\n\n\nimport { remove, Browser, extend } from '@syncfusion/ej2-base';\nimport { LegendOptions, BaseLegend } from '../../common/legend/legend';\nimport { textTrim, removeElement, RectOption, withInBounds, blazorTemplatesReset } from '../../common/utils/helper';\nimport { getUnicodeText } from '../../common/utils/helper';\nimport { measureText, Rect, getElement } from '@syncfusion/ej2-svg-base';\nimport { legendRender, legendClick, regSub, regSup } from '../../common/model/constants';\n/**\n * `Legend` module is used to render legend for the chart.\n */\n\nvar Legend =\n/** @class */\nfunction (_super) {\n  __extends(Legend, _super);\n\n  function Legend(chart) {\n    var _this = _super.call(this, chart) || this;\n\n    _this.library = _this;\n\n    _this.addEventListener();\n\n    return _this;\n  }\n  /**\n   * Binding events for legend module.\n   */\n\n\n  Legend.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\n    this.chart.on('click', this.click, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\n  };\n  /**\n   * UnBinding events for legend module.\n   */\n\n\n  Legend.prototype.removeEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    this.chart.off(Browser.touchMoveEvent, this.mouseMove);\n    this.chart.off('click', this.click);\n    this.chart.off(Browser.touchEndEvent, this.mouseEnd);\n  };\n  /**\n   * To handle mosue move for legend module\n   */\n\n\n  Legend.prototype.mouseMove = function (e) {\n    if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n      this.move(e);\n\n      if (this.chart.highlightModule && this.chart.highlightMode !== 'None') {\n        var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_', this.legendID + '_shape_'];\n        var targetId = e.target.id;\n        var index = void 0;\n\n        for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n          var id = legendItemsId_1[_i];\n\n          if (targetId.indexOf(id) > -1) {\n            index = parseInt(targetId.split(id)[1], 10);\n            this.chart.highlightModule.legendSelection(this.chart, index, e);\n            break;\n          }\n        } // this.click(e);\n\n      }\n    }\n  };\n  /**\n   * To handle mosue end for legend module\n   */\n\n\n  Legend.prototype.mouseEnd = function (e) {\n    if (this.chart.legendSettings.visible && this.chart.isTouch) {\n      this.move(e);\n    }\n  };\n  /**\n   * Get the legend options.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Legend.prototype.getLegendOptions = function (visibleSeriesCollection, chart) {\n    this.legendCollections = [];\n    var seriesType;\n    var fill;\n    var colors = [];\n    this.isRtlEnable = chart.enableRtl;\n    this.isReverse = !this.isRtlEnable && chart.legendSettings.reverse;\n\n    if (visibleSeriesCollection.length > 1) {\n      this.legend.mode = 'Series';\n    }\n\n    for (var _i = 0, visibleSeriesCollection_1 = visibleSeriesCollection; _i < visibleSeriesCollection_1.length; _i++) {\n      var series = visibleSeriesCollection_1[_i];\n\n      if (this.legend.mode === 'Series') {\n        if (series.category !== 'Indicator') {\n          seriesType = chart.chartAreaType === 'PolarRadar' ? series.drawType : series.type; // To set legend color when use pointColorMapping\n\n          fill = series.pointColorMapping && series.points.length > 0 ? series.points[0].interior ? series.points[0].interior : series.interior : series.interior;\n          this.legendCollections.push(new LegendOptions(series.name, fill, series.legendShape, series.category === 'TrendLine' ? this.chart.series[series.sourceIndex].trendlines[series.index].visible : series.visible, seriesType, series.legendImageUrl, series.marker.shape, series.marker.visible));\n        }\n      } else if (this.legend.mode === 'Point') {\n        var _loop_1 = function (points) {\n          seriesType = chart.chartAreaType === 'PolarRadar' ? series.drawType : series.type;\n          fill = points.interior ? points.interior : series.interior;\n\n          if (this_1.legendCollections.filter(function (i) {\n            return i.text === points.x.toString();\n          }).length === 0) {\n            this_1.legendCollections.push(new LegendOptions(points.x.toString(), fill, series.legendShape, series.category === 'TrendLine' ? this_1.chart.series[series.sourceIndex].trendlines[series.index].visible : points.visible, seriesType, '', series.marker.shape, series.marker.visible));\n          }\n        };\n\n        var this_1 = this;\n\n        for (var _a = 0, _b = series.points; _a < _b.length; _a++) {\n          var points = _b[_a];\n\n          _loop_1(points);\n        }\n      } else if (this.legend.mode === 'Range') {\n        for (var _c = 0, _d = series.points; _c < _d.length; _c++) {\n          var points = _d[_c];\n          seriesType = chart.chartAreaType === 'PolarRadar' ? series.drawType : series.type;\n          fill = points.interior ? points.interior : series.interior;\n          var legendLabel = 'Others';\n\n          if (colors.indexOf(fill) < 0) {\n            colors.push(fill);\n\n            if (chart.rangeColorSettings.length >= 1 && chart.rangeColorSettings[0].colors.length === 1) {\n              for (var _e = 0, _f = chart.rangeColorSettings; _e < _f.length; _e++) {\n                var rangeMap = _f[_e];\n\n                if (rangeMap.colors[0] === fill) {\n                  legendLabel = rangeMap.label;\n                }\n              }\n\n              this.legendCollections.push(new LegendOptions(legendLabel, fill, series.legendShape, series.category === 'TrendLine' ? this.chart.series[series.sourceIndex].trendlines[series.index].visible : points.visible, seriesType, '', series.marker.shape, series.marker.visible));\n            }\n          }\n        }\n      } else {\n        if (this.legendCollections.length === 0 && chart.rangeColorSettings.length > 0) {\n          var startLabel = chart.rangeColorSettings[0].start.toString();\n          var endLabel = chart.rangeColorSettings[chart.rangeColorSettings.length - 1].end.toString();\n          this.legendCollections.push(new LegendOptions(startLabel, series.interior, 'Rectangle', true, seriesType, '', series.marker.shape, series.marker.visible));\n          this.legendCollections.push(new LegendOptions(endLabel, series.interior, 'Rectangle', true, seriesType, '', series.marker.shape, series.marker.visible));\n        }\n      }\n    }\n\n    if (this.isReverse && chart.legendSettings.mode !== 'Gradient') {\n      this.legendCollections.reverse();\n    }\n  };\n  /** @private */\n\n\n  Legend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n    this.calculateLegendTitle(legend, legendBounds);\n    this.isTitle = legend.title ? true : false;\n    var padding = legend.padding;\n    var titlePosition = legend.titlePosition;\n    var extraHeight = 0;\n    var extraWidth = 0;\n    var arrowWidth = this.arrowWidth;\n    var arrowHeight = this.arrowHeight;\n    var verticalArrowSpace = this.isVertical && !legend.enablePages ? arrowHeight : 0;\n    var titleSpace = this.isTitle && titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n    titleSpace = this.isTitle && this.isVertical && titlePosition !== 'Top' ? this.legendTitleSize.height + this.fivePixel : titleSpace;\n\n    if (!this.isVertical) {\n      extraHeight = !legend.height ? availableSize.height / 100 * 5 : 0;\n    } else {\n      extraWidth = !legend.width ? availableSize.width / 100 * 5 : 0;\n    }\n\n    legendBounds.height += extraHeight;\n    legendBounds.width += extraWidth;\n    var shapeWidth = legend.shapeWidth;\n    var shapePadding = legend.shapePadding;\n    var maximumWidth = 0;\n    var rowWidth = 0;\n    var legendWidth = 0;\n    var columnHeight = 0;\n    var rowCount = 0;\n    var titlePlusArrowSpace = 0;\n    var legendEventArgs;\n    this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\n    var render = false;\n\n    for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n      var legendOption = _a[_i];\n\n      if (regSub.test(legendOption.text)) {\n        legendOption.text = getUnicodeText(legendOption.text, regSub);\n      }\n\n      if (regSup.test(legendOption.text)) {\n        legendOption.text = getUnicodeText(legendOption.text, regSup);\n      }\n\n      legendEventArgs = {\n        fill: legendOption.fill,\n        text: legendOption.text,\n        shape: legendOption.shape,\n        markerShape: legendOption.markerShape,\n        name: legendRender,\n        cancel: false\n      };\n      this.chart.trigger(legendRender, legendEventArgs);\n      legendOption.render = !legendEventArgs.cancel;\n      legendOption.text = legendEventArgs.text;\n      legendOption.fill = legendEventArgs.fill;\n      legendOption.shape = legendEventArgs.shape;\n      legendOption.markerShape = legendEventArgs.markerShape;\n      legendOption.textSize = measureText(legendOption.text, legend.textStyle);\n      shapeWidth = legendOption.text ? legend.shapeWidth : 0;\n      shapePadding = legendOption.text ? legend.shapePadding : 0;\n\n      if (legendOption.render && legendOption.text) {\n        render = true;\n        legendWidth = shapeWidth + shapePadding + legendOption.textSize.width + padding;\n        rowWidth = rowWidth + legendWidth;\n\n        if (!legend.enablePages && !this.isVertical) {\n          titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\n          titlePlusArrowSpace += arrowWidth;\n        }\n\n        if (legendBounds.width < padding + rowWidth + titlePlusArrowSpace || this.isVertical) {\n          maximumWidth = Math.max(maximumWidth, rowWidth + padding + titlePlusArrowSpace - (this.isVertical ? 0 : legendWidth));\n\n          if (rowCount === 0 && legendWidth !== rowWidth) {\n            rowCount = 1;\n          }\n\n          rowWidth = this.isVertical ? 0 : legendWidth;\n          rowCount++;\n          columnHeight = rowCount * (this.maxItemHeight + padding) + padding + titleSpace + verticalArrowSpace;\n        }\n      }\n    }\n\n    columnHeight = Math.max(columnHeight, this.maxItemHeight + padding + padding + titleSpace);\n    this.isPaging = legendBounds.height < columnHeight;\n\n    if (this.isPaging && !legend.enablePages) {\n      if (this.isVertical) {\n        // eslint-disable-next-line no-self-assign\n        columnHeight = columnHeight;\n      } else {\n        columnHeight = this.maxItemHeight + padding + padding + (titlePosition === 'Top' ? titleSpace : 0);\n      }\n    }\n\n    this.totalPages = rowCount;\n\n    if (!this.isPaging && !this.isVertical) {\n      rowWidth += this.isTitle && titlePosition !== 'Top' ? this.fivePixel + this.legendTitleSize.width + this.fivePixel : 0;\n    }\n\n    if (render) {\n      this.setBounds(Math.max(rowWidth + padding, maximumWidth), columnHeight, legend, legendBounds);\n    } else {\n      this.setBounds(0, 0, legend, legendBounds);\n    }\n  };\n  /** @private */\n\n\n  Legend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n    var padding = this.legend.padding;\n    var textWidth = textPadding + prevLegend.textSize.width;\n    var previousBound = prevLegend.location.x + (!this.isRtlEnable ? textWidth : -textWidth);\n\n    if (this.isWithinBounds(previousBound, legendOption.textSize.width + textPadding, rect) || this.isVertical) {\n      legendOption.location.x = start.x;\n      legendOption.location.y = count === firstLegend ? prevLegend.location.y : prevLegend.location.y + this.maxItemHeight + padding;\n    } else {\n      legendOption.location.x = count === firstLegend ? prevLegend.location.x : previousBound;\n      legendOption.location.y = prevLegend.location.y;\n    }\n\n    var availwidth = !this.isRtlEnable ? this.legendBounds.x + this.legendBounds.width - (legendOption.location.x + textPadding - this.legend.shapeWidth / 2) : legendOption.location.x - textPadding + this.legend.shapeWidth / 2 - this.legendBounds.x;\n    legendOption.text = textTrim(+availwidth.toFixed(4), legendOption.text, this.legend.textStyle);\n  };\n\n  Legend.prototype.isWithinBounds = function (previousBound, textWidth, rect) {\n    if (!this.isRtlEnable) {\n      return previousBound + textWidth > rect.x + rect.width + this.legend.shapeWidth / 2;\n    } else {\n      return previousBound - textWidth < rect.x - this.legend.shapeWidth / 2;\n    }\n  };\n  /** @private */\n\n\n  Legend.prototype.LegendClick = function (index, event) {\n    var chart = this.chart;\n    var seriesIndex = chart.legendSettings.mode === 'Series' ? index : 0;\n    var legendIndex = !this.isReverse ? index : this.legendCollections.length - 1 - index;\n    var series = chart.visibleSeries[seriesIndex];\n    var legend = this.legendCollections[legendIndex];\n    var changeDetection = 'isProtectedOnChange';\n\n    if (chart.legendSettings.mode === 'Series') {\n      var legendClickArgs = {\n        legendText: legend.text,\n        legendShape: legend.shape,\n        chart: chart.isBlazor ? {} : chart,\n        series: series,\n        points: series.points,\n        name: legendClick,\n        cancel: false\n      };\n      this.chart.trigger(legendClick, legendClickArgs);\n      series.legendShape = legendClickArgs.legendShape;\n\n      if (series.fill !== null) {\n        chart.visibleSeries[index].interior = series.fill;\n      }\n\n      if (chart.legendSettings.toggleVisibility) {\n        if (series.category === 'TrendLine') {\n          if (!chart.series[series.sourceIndex].trendlines[series.index].visible) {\n            chart.series[series.sourceIndex].trendlines[series.index].visible = true;\n          } else {\n            chart.series[series.sourceIndex].trendlines[series.index].visible = false;\n          }\n        } else {\n          series.chart[changeDetection] = true;\n          this.changeSeriesVisiblity(series, series.visible);\n        }\n\n        legend.visible = series.category === 'TrendLine' ? chart.series[series.sourceIndex].trendlines[series.index].visible : series.visible;\n        this.refreshLegendToggle(chart, series);\n      } else if (chart.highlightModule) {\n        chart.highlightModule.legendSelection(chart, index, event);\n      } else if (chart.selectionModule) {\n        chart.selectionModule.legendSelection(chart, index, event);\n      }\n\n      series.chart[changeDetection] = false;\n    } else if (chart.legendSettings.mode === 'Point') {\n      var point = series.points[index];\n      var legendClickArgs = {\n        legendText: legend.text,\n        legendShape: legend.shape,\n        chart: chart.isBlazor ? {} : chart,\n        series: series,\n        points: [point],\n        name: legendClick,\n        cancel: false\n      };\n      this.chart.trigger(legendClick, legendClickArgs);\n\n      if (chart.legendSettings.toggleVisibility) {\n        point.visible = !point.visible;\n        var legendOption = this.legendCollections[index];\n        legendOption.visible = point.visible;\n        this.refreshLegendToggle(chart, series);\n      }\n    } else if (chart.legendSettings.mode === 'Range') {\n      var points = [];\n      var legendOption = this.legendCollections[index];\n\n      for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n        var point = _a[_i];\n\n        if (legendOption.fill === (point.interior || series.interior)) {\n          points.push(point);\n        }\n      }\n\n      var legendClickArgs = {\n        legendText: legend.text,\n        legendShape: legend.shape,\n        chart: chart.isBlazor ? {} : chart,\n        series: series,\n        points: points,\n        name: legendClick,\n        cancel: false\n      };\n      this.chart.trigger(legendClick, legendClickArgs);\n\n      if (chart.legendSettings.toggleVisibility) {\n        legendOption.visible = !legendOption.visible;\n\n        for (var _b = 0, points_1 = points; _b < points_1.length; _b++) {\n          var point = points_1[_b];\n          point.visible = !point.visible;\n        }\n\n        this.refreshLegendToggle(chart, series);\n      }\n    }\n  };\n\n  Legend.prototype.refreshLegendToggle = function (chart, series) {\n    var selectedDataIndexes = [];\n\n    if (chart.selectionModule) {\n      selectedDataIndexes = extend([], chart.selectionModule.selectedDataIndexes, null, true);\n    }\n\n    if (chart.svgObject.childNodes.length > 0 && !chart.enableAnimation && !chart.enableCanvas) {\n      while (chart.svgObject.lastChild) {\n        chart.svgObject.removeChild(chart.svgObject.lastChild);\n      }\n\n      remove(chart.svgObject);\n    }\n\n    chart.animateSeries = false;\n    chart.redraw = chart.enableAnimation;\n    chart.rotatedDataLabelCollections = [];\n    removeElement(getElement(chart.element.id + '_Secondary_Element').querySelectorAll('.ejSVGTooltip')[0]);\n    blazorTemplatesReset(chart);\n    this.redrawSeriesElements(series, chart);\n    chart.removeSvg();\n    chart.refreshAxis();\n    series.refreshAxisLabel();\n    this.refreshSeries(chart.visibleSeries);\n    chart.markerRender.removeHighlightedMarker();\n    chart.refreshBound();\n    chart.trigger('loaded', {\n      chart: chart\n    });\n\n    if (selectedDataIndexes.length > 0) {\n      chart.selectionModule.selectedDataIndexes = selectedDataIndexes;\n      chart.selectionModule.redrawSelection(chart, chart.selectionMode);\n    }\n\n    if (chart.highlightModule && chart.highlightMode !== 'None') {\n      chart.highlightModule.redrawSelection(chart, chart.highlightMode);\n    }\n\n    chart.redraw = false;\n  };\n\n  Legend.prototype.changeSeriesVisiblity = function (series, visibility) {\n    series.visible = !visibility;\n\n    if (this.isSecondaryAxis(series.xAxis)) {\n      series.xAxis.internalVisibility = series.xAxis.series.some(function (value) {\n        return value.visible;\n      });\n    }\n\n    if (this.isSecondaryAxis(series.yAxis)) {\n      series.yAxis.internalVisibility = series.yAxis.series.some(function (value) {\n        return value.visible;\n      });\n    }\n  };\n\n  Legend.prototype.isSecondaryAxis = function (axis) {\n    return this.chart.axes.indexOf(axis) > -1;\n  };\n\n  Legend.prototype.redrawSeriesElements = function (series, chart) {\n    if (!chart.redraw) {\n      return null;\n    }\n\n    removeElement(chart.element.id + '_Series_' + (series.index === undefined ? series.category : series.index) + '_DataLabelCollections');\n  };\n\n  Legend.prototype.refreshSeries = function (seriesCollection) {\n    for (var _i = 0, seriesCollection_1 = seriesCollection; _i < seriesCollection_1.length; _i++) {\n      var series = seriesCollection_1[_i];\n\n      if (series.type.indexOf('Spline') > -1) {\n        var isArea = series.type.indexOf('Area') > -1 || series.drawType.indexOf('Area') > -1;\n        var isRange = series.type.indexOf('Range') > -1;\n        this.chart['spline' + (isArea ? isRange ? 'RangeArea' : 'Area' : '') + 'SeriesModule'].findSplinePoint(series);\n      }\n\n      series.position = undefined;\n    }\n  };\n  /**\n   * To show the tooltip for the trimmed text in legend.\n   *\n   * @returns {void}\n   */\n\n\n  Legend.prototype.click = function (event) {\n    var _this = this;\n\n    if (!this.chart.legendSettings.visible) {\n      return;\n    }\n\n    var pageX = this.chart.mouseX;\n    var pageY = this.chart.mouseY;\n    var legendRegion = [];\n    var targetId = event.target.id;\n    var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_', this.legendID + '_shape_'];\n    var seriesIndex;\n\n    for (var _i = 0, legendItemsId_2 = legendItemsId; _i < legendItemsId_2.length; _i++) {\n      var id = legendItemsId_2[_i];\n\n      if (targetId.indexOf(id) > -1) {\n        seriesIndex = parseInt(targetId.split(id)[1], 10);\n        this.LegendClick(seriesIndex, event);\n        break;\n      }\n    }\n\n    if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n      this.changePage(event, true);\n    } else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n      this.changePage(event, false);\n    }\n\n    if (this.chart.enableCanvas && this.pagingRegions.length) {\n      this.checkWithinBounds(pageX, pageY);\n    }\n\n    legendRegion = this.legendRegions.filter(function (region) {\n      return withInBounds(pageX, pageY + (_this.isPaging ? (_this.currentPageNumber - 1) * _this.translatePage(null, 1, 2) : 0), region.rect);\n    });\n\n    if (legendRegion.length && this.chart.enableCanvas) {\n      this.LegendClick(legendRegion[0].index, event);\n    }\n  };\n  /**\n   * To check click position is within legend bounds\n   */\n\n\n  Legend.prototype.checkWithinBounds = function (pageX, pageY) {\n    var cRender = this.chart.renderer;\n    var bounds = this.legendBounds;\n    var borderWidth = this.chart.legendSettings.border.width;\n    var canvasRect = new Rect(bounds.x, bounds.y, bounds.width, bounds.height);\n    canvasRect.x = canvasRect.x - borderWidth / 2;\n    canvasRect.y = canvasRect.y - borderWidth / 2;\n    canvasRect.width = canvasRect.width + borderWidth;\n    canvasRect.height = canvasRect.height + borderWidth;\n\n    if (withInBounds(pageX, pageY, this.pagingRegions[0])) {\n      // pageDown calculations are performing here\n      if (!this.isRtlEnable) {\n        this.canvasPageDown(cRender, canvasRect, bounds);\n      } else {\n        this.canvasPageUp(cRender, canvasRect, bounds);\n      }\n\n      return null;\n    }\n\n    if (withInBounds(pageX, pageY, this.pagingRegions[1])) {\n      // pageUp calculations are performing here\n      if (!this.isRtlEnable) {\n        this.canvasPageUp(cRender, canvasRect, bounds);\n      } else {\n        this.canvasPageDown(cRender, canvasRect, bounds);\n      }\n\n      return null;\n    }\n  };\n\n  Legend.prototype.canvasPageDown = function (cRender, canvasRect, bounds) {\n    if (--this.currentPageNumber > 0) {\n      this.legendRegions = [];\n      cRender.clearRect(canvasRect);\n      cRender.canvasClip(new RectOption('legendClipPath', 'transparent', {\n        width: 0,\n        color: ''\n      }, null, canvasRect));\n      this.renderLegend(this.chart, this.legend, bounds);\n      cRender.canvasRestore();\n    } else {\n      ++this.currentPageNumber;\n    }\n  };\n\n  Legend.prototype.canvasPageUp = function (cRender, canvasRect, bounds) {\n    if (++this.currentPageNumber > 0 && this.currentPageNumber <= this.totalNoOfPages) {\n      this.legendRegions = [];\n      cRender.clearRect(canvasRect);\n      cRender.canvasClip(new RectOption('legendClipPath', 'transpaent', {\n        width: 0,\n        color: ''\n      }, null, canvasRect));\n      this.renderLegend(this.chart, this.legend, bounds);\n      cRender.canvasRestore();\n    } else {\n      --this.currentPageNumber;\n    }\n  };\n  /**\n   * Get module name\n   */\n\n\n  Legend.prototype.getModuleName = function () {\n    return 'Legend';\n  };\n  /**\n   * To destroy the Legend.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Legend.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return Legend;\n}(BaseLegend);\n\nexport { Legend };","map":{"version":3,"sources":["C:/Users/khang/OneDrive/Tài liệu/JS/PersonalDashdoard/dashboard/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/chart/legend/legend.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","remove","Browser","extend","LegendOptions","BaseLegend","textTrim","removeElement","RectOption","withInBounds","blazorTemplatesReset","getUnicodeText","measureText","Rect","getElement","legendRender","legendClick","regSub","regSup","Legend","_super","chart","_this","call","library","addEventListener","isDestroyed","on","touchMoveEvent","mouseMove","click","touchEndEvent","mouseEnd","removeEventListener","off","e","legendSettings","visible","isTouch","move","highlightModule","highlightMode","legendItemsId","legendID","targetId","target","id","index","_i","legendItemsId_1","length","indexOf","parseInt","split","legendSelection","getLegendOptions","visibleSeriesCollection","legendCollections","seriesType","fill","colors","isRtlEnable","enableRtl","isReverse","reverse","legend","mode","visibleSeriesCollection_1","series","category","chartAreaType","drawType","type","pointColorMapping","points","interior","push","name","legendShape","sourceIndex","trendlines","legendImageUrl","marker","shape","_loop_1","this_1","filter","i","text","x","toString","_a","_b","_c","_d","legendLabel","rangeColorSettings","_e","_f","rangeMap","label","startLabel","start","endLabel","end","getLegendBounds","availableSize","legendBounds","calculateLegendTitle","isTitle","title","padding","titlePosition","extraHeight","extraWidth","arrowWidth","arrowHeight","verticalArrowSpace","isVertical","enablePages","titleSpace","legendTitleSize","height","fivePixel","width","shapeWidth","shapePadding","maximumWidth","rowWidth","legendWidth","columnHeight","rowCount","titlePlusArrowSpace","legendEventArgs","maxItemHeight","Math","max","textStyle","shapeHeight","render","legendOption","test","markerShape","cancel","trigger","textSize","isPaging","totalPages","setBounds","getRenderPoint","textPadding","prevLegend","rect","count","firstLegend","textWidth","previousBound","location","isWithinBounds","y","availwidth","toFixed","LegendClick","event","seriesIndex","legendIndex","visibleSeries","changeDetection","legendClickArgs","legendText","isBlazor","toggleVisibility","changeSeriesVisiblity","refreshLegendToggle","selectionModule","point","points_1","selectedDataIndexes","svgObject","childNodes","enableAnimation","enableCanvas","lastChild","removeChild","animateSeries","redraw","rotatedDataLabelCollections","element","querySelectorAll","redrawSeriesElements","removeSvg","refreshAxis","refreshAxisLabel","refreshSeries","markerRender","removeHighlightedMarker","refreshBound","redrawSelection","selectionMode","visibility","isSecondaryAxis","xAxis","internalVisibility","some","value","yAxis","axis","axes","undefined","seriesCollection","seriesCollection_1","isArea","isRange","findSplinePoint","position","pageX","mouseX","pageY","mouseY","legendRegion","legendItemsId_2","changePage","pagingRegions","checkWithinBounds","legendRegions","region","currentPageNumber","translatePage","cRender","renderer","bounds","borderWidth","border","canvasRect","canvasPageDown","canvasPageUp","clearRect","canvasClip","color","renderLegend","canvasRestore","totalNoOfPages","getModuleName","destroy"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable jsdoc/require-returns */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable valid-jsdoc */\n/**\n * Chart legend\n */\nimport { remove, Browser, extend } from '@syncfusion/ej2-base';\nimport { LegendOptions, BaseLegend } from '../../common/legend/legend';\nimport { textTrim, removeElement, RectOption, withInBounds, blazorTemplatesReset } from '../../common/utils/helper';\nimport { getUnicodeText } from '../../common/utils/helper';\nimport { measureText, Rect, getElement } from '@syncfusion/ej2-svg-base';\nimport { legendRender, legendClick, regSub, regSup } from '../../common/model/constants';\n/**\n * `Legend` module is used to render legend for the chart.\n */\nvar Legend = /** @class */ (function (_super) {\n    __extends(Legend, _super);\n    function Legend(chart) {\n        var _this = _super.call(this, chart) || this;\n        _this.library = _this;\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * Binding events for legend module.\n     */\n    Legend.prototype.addEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\n        this.chart.on('click', this.click, this);\n        this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\n    };\n    /**\n     * UnBinding events for legend module.\n     */\n    Legend.prototype.removeEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        this.chart.off(Browser.touchMoveEvent, this.mouseMove);\n        this.chart.off('click', this.click);\n        this.chart.off(Browser.touchEndEvent, this.mouseEnd);\n    };\n    /**\n     * To handle mosue move for legend module\n     */\n    Legend.prototype.mouseMove = function (e) {\n        if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n            this.move(e);\n            if (this.chart.highlightModule && this.chart.highlightMode !== 'None') {\n                var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_',\n                    this.legendID + '_shape_'];\n                var targetId = e.target.id;\n                var index = void 0;\n                for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n                    var id = legendItemsId_1[_i];\n                    if (targetId.indexOf(id) > -1) {\n                        index = parseInt(targetId.split(id)[1], 10);\n                        this.chart.highlightModule.legendSelection(this.chart, index, e);\n                        break;\n                    }\n                }\n                // this.click(e);\n            }\n        }\n    };\n    /**\n     * To handle mosue end for legend module\n     */\n    Legend.prototype.mouseEnd = function (e) {\n        if (this.chart.legendSettings.visible && this.chart.isTouch) {\n            this.move(e);\n        }\n    };\n    /**\n     * Get the legend options.\n     *\n     * @returns {void}\n     * @private\n     */\n    Legend.prototype.getLegendOptions = function (visibleSeriesCollection, chart) {\n        this.legendCollections = [];\n        var seriesType;\n        var fill;\n        var colors = [];\n        this.isRtlEnable = chart.enableRtl;\n        this.isReverse = !this.isRtlEnable && chart.legendSettings.reverse;\n        if (visibleSeriesCollection.length > 1) {\n            this.legend.mode = 'Series';\n        }\n        for (var _i = 0, visibleSeriesCollection_1 = visibleSeriesCollection; _i < visibleSeriesCollection_1.length; _i++) {\n            var series = visibleSeriesCollection_1[_i];\n            if (this.legend.mode === 'Series') {\n                if (series.category !== 'Indicator') {\n                    seriesType = (chart.chartAreaType === 'PolarRadar') ? series.drawType :\n                        series.type;\n                    // To set legend color when use pointColorMapping\n                    fill = (series.pointColorMapping && series.points.length > 0) ?\n                        (series.points[0].interior ? series.points[0].interior : series.interior) : series.interior;\n                    this.legendCollections.push(new LegendOptions(series.name, fill, series.legendShape, (series.category === 'TrendLine' ?\n                        this.chart.series[series.sourceIndex].trendlines[series.index].visible : series.visible), seriesType, series.legendImageUrl, series.marker.shape, series.marker.visible));\n                }\n            }\n            else if (this.legend.mode === 'Point') {\n                var _loop_1 = function (points) {\n                    seriesType = (chart.chartAreaType === 'PolarRadar') ? series.drawType :\n                        series.type;\n                    fill = points.interior ? points.interior : series.interior;\n                    if (this_1.legendCollections.filter(function (i) { return i.text === points.x.toString(); }).length === 0) {\n                        this_1.legendCollections.push(new LegendOptions(points.x.toString(), fill, series.legendShape, (series.category === 'TrendLine' ?\n                            this_1.chart.series[series.sourceIndex].trendlines[series.index].visible : points.visible), seriesType, '', series.marker.shape, series.marker.visible));\n                    }\n                };\n                var this_1 = this;\n                for (var _a = 0, _b = series.points; _a < _b.length; _a++) {\n                    var points = _b[_a];\n                    _loop_1(points);\n                }\n            }\n            else if (this.legend.mode === 'Range') {\n                for (var _c = 0, _d = series.points; _c < _d.length; _c++) {\n                    var points = _d[_c];\n                    seriesType = (chart.chartAreaType === 'PolarRadar') ? series.drawType :\n                        series.type;\n                    fill = points.interior ? points.interior : series.interior;\n                    var legendLabel = 'Others';\n                    if (colors.indexOf(fill) < 0) {\n                        colors.push(fill);\n                        if (chart.rangeColorSettings.length >= 1 && chart.rangeColorSettings[0].colors.length === 1) {\n                            for (var _e = 0, _f = chart.rangeColorSettings; _e < _f.length; _e++) {\n                                var rangeMap = _f[_e];\n                                if (rangeMap.colors[0] === fill) {\n                                    legendLabel = rangeMap.label;\n                                }\n                            }\n                            this.legendCollections.push(new LegendOptions(legendLabel, fill, series.legendShape, (series.category === 'TrendLine' ?\n                                this.chart.series[series.sourceIndex].trendlines[series.index].visible : points.visible), seriesType, '', series.marker.shape, series.marker.visible));\n                        }\n                    }\n                }\n            }\n            else {\n                if (this.legendCollections.length === 0 && chart.rangeColorSettings.length > 0) {\n                    var startLabel = chart.rangeColorSettings[0].start.toString();\n                    var endLabel = chart.rangeColorSettings[chart.rangeColorSettings.length - 1].end.toString();\n                    this.legendCollections.push(new LegendOptions(startLabel, series.interior, 'Rectangle', true, seriesType, '', series.marker.shape, series.marker.visible));\n                    this.legendCollections.push(new LegendOptions(endLabel, series.interior, 'Rectangle', true, seriesType, '', series.marker.shape, series.marker.visible));\n                }\n            }\n        }\n        if (this.isReverse && chart.legendSettings.mode !== 'Gradient') {\n            this.legendCollections.reverse();\n        }\n    };\n    /** @private */\n    Legend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n        this.calculateLegendTitle(legend, legendBounds);\n        this.isTitle = legend.title ? true : false;\n        var padding = legend.padding;\n        var titlePosition = legend.titlePosition;\n        var extraHeight = 0;\n        var extraWidth = 0;\n        var arrowWidth = this.arrowWidth;\n        var arrowHeight = this.arrowHeight;\n        var verticalArrowSpace = this.isVertical && !legend.enablePages ? arrowHeight : 0;\n        var titleSpace = this.isTitle && titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n        titleSpace = this.isTitle && this.isVertical && titlePosition !== 'Top' ? this.legendTitleSize.height + this.fivePixel : titleSpace;\n        if (!this.isVertical) {\n            extraHeight = !legend.height ? ((availableSize.height / 100) * 5) : 0;\n        }\n        else {\n            extraWidth = !legend.width ? ((availableSize.width / 100) * 5) : 0;\n        }\n        legendBounds.height += (extraHeight);\n        legendBounds.width += extraWidth;\n        var shapeWidth = legend.shapeWidth;\n        var shapePadding = legend.shapePadding;\n        var maximumWidth = 0;\n        var rowWidth = 0;\n        var legendWidth = 0;\n        var columnHeight = 0;\n        var rowCount = 0;\n        var titlePlusArrowSpace = 0;\n        var legendEventArgs;\n        this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\n        var render = false;\n        for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n            var legendOption = _a[_i];\n            if (regSub.test(legendOption.text)) {\n                legendOption.text = getUnicodeText(legendOption.text, regSub);\n            }\n            if (regSup.test(legendOption.text)) {\n                legendOption.text = getUnicodeText(legendOption.text, regSup);\n            }\n            legendEventArgs = {\n                fill: legendOption.fill, text: legendOption.text, shape: legendOption.shape,\n                markerShape: legendOption.markerShape, name: legendRender, cancel: false\n            };\n            this.chart.trigger(legendRender, legendEventArgs);\n            legendOption.render = !legendEventArgs.cancel;\n            legendOption.text = legendEventArgs.text;\n            legendOption.fill = legendEventArgs.fill;\n            legendOption.shape = legendEventArgs.shape;\n            legendOption.markerShape = legendEventArgs.markerShape;\n            legendOption.textSize = measureText(legendOption.text, legend.textStyle);\n            shapeWidth = legendOption.text ? legend.shapeWidth : 0;\n            shapePadding = legendOption.text ? legend.shapePadding : 0;\n            if (legendOption.render && legendOption.text) {\n                render = true;\n                legendWidth = shapeWidth + shapePadding + legendOption.textSize.width + padding;\n                rowWidth = rowWidth + legendWidth;\n                if (!legend.enablePages && !this.isVertical) {\n                    titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\n                    titlePlusArrowSpace += arrowWidth;\n                }\n                if (legendBounds.width < (padding + rowWidth + titlePlusArrowSpace) || this.isVertical) {\n                    maximumWidth = Math.max(maximumWidth, (rowWidth + padding + titlePlusArrowSpace - (this.isVertical ? 0 : legendWidth)));\n                    if (rowCount === 0 && (legendWidth !== rowWidth)) {\n                        rowCount = 1;\n                    }\n                    rowWidth = this.isVertical ? 0 : legendWidth;\n                    rowCount++;\n                    columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding + titleSpace + verticalArrowSpace;\n                }\n            }\n        }\n        columnHeight = Math.max(columnHeight, (this.maxItemHeight + padding) + padding + titleSpace);\n        this.isPaging = legendBounds.height < columnHeight;\n        if (this.isPaging && !legend.enablePages) {\n            if (this.isVertical) {\n                // eslint-disable-next-line no-self-assign\n                columnHeight = columnHeight;\n            }\n            else {\n                columnHeight = (this.maxItemHeight + padding) + padding + (titlePosition === 'Top' ? titleSpace : 0);\n            }\n        }\n        this.totalPages = rowCount;\n        if (!this.isPaging && !this.isVertical) {\n            rowWidth += this.isTitle && titlePosition !== 'Top' ? (this.fivePixel + this.legendTitleSize.width + this.fivePixel) : 0;\n        }\n        if (render) {\n            this.setBounds(Math.max((rowWidth + padding), maximumWidth), columnHeight, legend, legendBounds);\n        }\n        else {\n            this.setBounds(0, 0, legend, legendBounds);\n        }\n    };\n    /** @private */\n    Legend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n        var padding = this.legend.padding;\n        var textWidth = textPadding + prevLegend.textSize.width;\n        var previousBound = prevLegend.location.x + ((!this.isRtlEnable) ? textWidth : -textWidth);\n        if (this.isWithinBounds(previousBound, legendOption.textSize.width + textPadding, rect) || this.isVertical) {\n            legendOption.location.x = start.x;\n            legendOption.location.y = (count === firstLegend) ? prevLegend.location.y :\n                prevLegend.location.y + this.maxItemHeight + padding;\n        }\n        else {\n            legendOption.location.x = (count === firstLegend) ? prevLegend.location.x : previousBound;\n            legendOption.location.y = prevLegend.location.y;\n        }\n        var availwidth = (!this.isRtlEnable) ? (this.legendBounds.x + this.legendBounds.width) - (legendOption.location.x +\n            textPadding - this.legend.shapeWidth / 2) : (legendOption.location.x - textPadding + (this.legend.shapeWidth / 2)) - this.legendBounds.x;\n        legendOption.text = textTrim(+availwidth.toFixed(4), legendOption.text, this.legend.textStyle);\n    };\n    Legend.prototype.isWithinBounds = function (previousBound, textWidth, rect) {\n        if (!this.isRtlEnable) {\n            return (previousBound + textWidth) > (rect.x + rect.width + (this.legend.shapeWidth / 2));\n        }\n        else {\n            return (previousBound - textWidth) < (rect.x - (this.legend.shapeWidth / 2));\n        }\n    };\n    /** @private */\n    Legend.prototype.LegendClick = function (index, event) {\n        var chart = this.chart;\n        var seriesIndex = chart.legendSettings.mode === 'Series' ? index : 0;\n        var legendIndex = !this.isReverse ? index : (this.legendCollections.length - 1) - index;\n        var series = chart.visibleSeries[seriesIndex];\n        var legend = this.legendCollections[legendIndex];\n        var changeDetection = 'isProtectedOnChange';\n        if (chart.legendSettings.mode === 'Series') {\n            var legendClickArgs = {\n                legendText: legend.text, legendShape: legend.shape,\n                chart: chart.isBlazor ? {} : chart, series: series, points: series.points, name: legendClick, cancel: false\n            };\n            this.chart.trigger(legendClick, legendClickArgs);\n            series.legendShape = legendClickArgs.legendShape;\n            if (series.fill !== null) {\n                chart.visibleSeries[index].interior = series.fill;\n            }\n            if (chart.legendSettings.toggleVisibility) {\n                if (series.category === 'TrendLine') {\n                    if (!chart.series[series.sourceIndex].trendlines[series.index].visible) {\n                        chart.series[series.sourceIndex].trendlines[series.index].visible = true;\n                    }\n                    else {\n                        chart.series[series.sourceIndex].trendlines[series.index].visible = false;\n                    }\n                }\n                else {\n                    series.chart[changeDetection] = true;\n                    this.changeSeriesVisiblity(series, series.visible);\n                }\n                legend.visible = series.category === 'TrendLine' ? chart.series[series.sourceIndex].trendlines[series.index].visible :\n                    (series.visible);\n                this.refreshLegendToggle(chart, series);\n            }\n            else if (chart.highlightModule) {\n                chart.highlightModule.legendSelection(chart, index, event);\n            }\n            else if (chart.selectionModule) {\n                chart.selectionModule.legendSelection(chart, index, event);\n            }\n            series.chart[changeDetection] = false;\n        }\n        else if (chart.legendSettings.mode === 'Point') {\n            var point = series.points[index];\n            var legendClickArgs = {\n                legendText: legend.text, legendShape: legend.shape,\n                chart: chart.isBlazor ? {} : chart, series: series, points: [point], name: legendClick, cancel: false\n            };\n            this.chart.trigger(legendClick, legendClickArgs);\n            if (chart.legendSettings.toggleVisibility) {\n                point.visible = !point.visible;\n                var legendOption = this.legendCollections[index];\n                legendOption.visible = point.visible;\n                this.refreshLegendToggle(chart, series);\n            }\n        }\n        else if (chart.legendSettings.mode === 'Range') {\n            var points = [];\n            var legendOption = this.legendCollections[index];\n            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n                var point = _a[_i];\n                if (legendOption.fill === (point.interior || series.interior)) {\n                    points.push(point);\n                }\n            }\n            var legendClickArgs = {\n                legendText: legend.text, legendShape: legend.shape,\n                chart: chart.isBlazor ? {} : chart, series: series, points: points, name: legendClick, cancel: false\n            };\n            this.chart.trigger(legendClick, legendClickArgs);\n            if (chart.legendSettings.toggleVisibility) {\n                legendOption.visible = !legendOption.visible;\n                for (var _b = 0, points_1 = points; _b < points_1.length; _b++) {\n                    var point = points_1[_b];\n                    point.visible = !point.visible;\n                }\n                this.refreshLegendToggle(chart, series);\n            }\n        }\n    };\n    Legend.prototype.refreshLegendToggle = function (chart, series) {\n        var selectedDataIndexes = [];\n        if (chart.selectionModule) {\n            selectedDataIndexes = extend([], chart.selectionModule.selectedDataIndexes, null, true);\n        }\n        if ((chart.svgObject.childNodes.length > 0) && !chart.enableAnimation && !chart.enableCanvas) {\n            while (chart.svgObject.lastChild) {\n                chart.svgObject.removeChild(chart.svgObject.lastChild);\n            }\n            remove(chart.svgObject);\n        }\n        chart.animateSeries = false;\n        chart.redraw = chart.enableAnimation;\n        chart.rotatedDataLabelCollections = [];\n        removeElement(getElement(chart.element.id + '_Secondary_Element').querySelectorAll('.ejSVGTooltip')[0]);\n        blazorTemplatesReset(chart);\n        this.redrawSeriesElements(series, chart);\n        chart.removeSvg();\n        chart.refreshAxis();\n        series.refreshAxisLabel();\n        this.refreshSeries(chart.visibleSeries);\n        chart.markerRender.removeHighlightedMarker();\n        chart.refreshBound();\n        chart.trigger('loaded', { chart: chart });\n        if (selectedDataIndexes.length > 0) {\n            chart.selectionModule.selectedDataIndexes = selectedDataIndexes;\n            chart.selectionModule.redrawSelection(chart, chart.selectionMode);\n        }\n        if (chart.highlightModule && chart.highlightMode !== 'None') {\n            chart.highlightModule.redrawSelection(chart, chart.highlightMode);\n        }\n        chart.redraw = false;\n    };\n    Legend.prototype.changeSeriesVisiblity = function (series, visibility) {\n        series.visible = !visibility;\n        if (this.isSecondaryAxis(series.xAxis)) {\n            series.xAxis.internalVisibility = series.xAxis.series.some(function (value) { return (value.visible); });\n        }\n        if (this.isSecondaryAxis(series.yAxis)) {\n            series.yAxis.internalVisibility = series.yAxis.series.some(function (value) { return (value.visible); });\n        }\n    };\n    Legend.prototype.isSecondaryAxis = function (axis) {\n        return (this.chart.axes.indexOf(axis) > -1);\n    };\n    Legend.prototype.redrawSeriesElements = function (series, chart) {\n        if (!chart.redraw) {\n            return null;\n        }\n        removeElement(chart.element.id + '_Series_' + (series.index === undefined ? series.category : series.index) +\n            '_DataLabelCollections');\n    };\n    Legend.prototype.refreshSeries = function (seriesCollection) {\n        for (var _i = 0, seriesCollection_1 = seriesCollection; _i < seriesCollection_1.length; _i++) {\n            var series = seriesCollection_1[_i];\n            if (series.type.indexOf('Spline') > -1) {\n                var isArea = (series.type.indexOf('Area') > -1 || series.drawType.indexOf('Area') > -1);\n                var isRange = series.type.indexOf('Range') > -1;\n                this.chart['spline' + (isArea ? isRange ? 'RangeArea' : 'Area' : '') + 'SeriesModule'].findSplinePoint(series);\n            }\n            series.position = undefined;\n        }\n    };\n    /**\n     * To show the tooltip for the trimmed text in legend.\n     *\n     * @returns {void}\n     */\n    Legend.prototype.click = function (event) {\n        var _this = this;\n        if (!this.chart.legendSettings.visible) {\n            return;\n        }\n        var pageX = this.chart.mouseX;\n        var pageY = this.chart.mouseY;\n        var legendRegion = [];\n        var targetId = event.target.id;\n        var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_',\n            this.legendID + '_shape_'];\n        var seriesIndex;\n        for (var _i = 0, legendItemsId_2 = legendItemsId; _i < legendItemsId_2.length; _i++) {\n            var id = legendItemsId_2[_i];\n            if (targetId.indexOf(id) > -1) {\n                seriesIndex = parseInt(targetId.split(id)[1], 10);\n                this.LegendClick(seriesIndex, event);\n                break;\n            }\n        }\n        if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n            this.changePage(event, true);\n        }\n        else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n            this.changePage(event, false);\n        }\n        if (this.chart.enableCanvas && this.pagingRegions.length) {\n            this.checkWithinBounds(pageX, pageY);\n        }\n        legendRegion = this.legendRegions.filter(function (region) {\n            return (withInBounds(pageX, (pageY + (_this.isPaging ? (_this.currentPageNumber - 1) * _this.translatePage(null, 1, 2) : 0)), region.rect));\n        });\n        if (legendRegion.length && this.chart.enableCanvas) {\n            this.LegendClick(legendRegion[0].index, event);\n        }\n    };\n    /**\n     * To check click position is within legend bounds\n     */\n    Legend.prototype.checkWithinBounds = function (pageX, pageY) {\n        var cRender = this.chart.renderer;\n        var bounds = this.legendBounds;\n        var borderWidth = this.chart.legendSettings.border.width;\n        var canvasRect = new Rect(bounds.x, bounds.y, bounds.width, bounds.height);\n        canvasRect.x = canvasRect.x - borderWidth / 2;\n        canvasRect.y = canvasRect.y - borderWidth / 2;\n        canvasRect.width = canvasRect.width + borderWidth;\n        canvasRect.height = canvasRect.height + borderWidth;\n        if (withInBounds(pageX, pageY, this.pagingRegions[0])) {\n            // pageDown calculations are performing here\n            if (!this.isRtlEnable) {\n                this.canvasPageDown(cRender, canvasRect, bounds);\n            }\n            else {\n                this.canvasPageUp(cRender, canvasRect, bounds);\n            }\n            return null;\n        }\n        if (withInBounds(pageX, pageY, this.pagingRegions[1])) {\n            // pageUp calculations are performing here\n            if (!this.isRtlEnable) {\n                this.canvasPageUp(cRender, canvasRect, bounds);\n            }\n            else {\n                this.canvasPageDown(cRender, canvasRect, bounds);\n            }\n            return null;\n        }\n    };\n    Legend.prototype.canvasPageDown = function (cRender, canvasRect, bounds) {\n        if (--this.currentPageNumber > 0) {\n            this.legendRegions = [];\n            cRender.clearRect(canvasRect);\n            cRender.canvasClip(new RectOption('legendClipPath', 'transparent', { width: 0, color: '' }, null, canvasRect));\n            this.renderLegend(this.chart, this.legend, bounds);\n            cRender.canvasRestore();\n        }\n        else {\n            ++this.currentPageNumber;\n        }\n    };\n    Legend.prototype.canvasPageUp = function (cRender, canvasRect, bounds) {\n        if (++this.currentPageNumber > 0 && this.currentPageNumber <= this.totalNoOfPages) {\n            this.legendRegions = [];\n            cRender.clearRect(canvasRect);\n            cRender.canvasClip(new RectOption('legendClipPath', 'transpaent', { width: 0, color: '' }, null, canvasRect));\n            this.renderLegend(this.chart, this.legend, bounds);\n            cRender.canvasRestore();\n        }\n        else {\n            --this.currentPageNumber;\n        }\n    };\n    /**\n     * Get module name\n     */\n    Legend.prototype.getModuleName = function () {\n        return 'Legend';\n    };\n    /**\n     * To destroy the Legend.\n     *\n     * @returns {void}\n     * @private\n     */\n    Legend.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Legend;\n}(BaseLegend));\nexport { Legend };\n"]},"metadata":{},"sourceType":"module"}