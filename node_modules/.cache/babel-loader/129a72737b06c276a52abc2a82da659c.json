{"ast":null,"code":"/**\n * ImageDecoder class\n */\nimport { ByteArray } from './byte-array';\nimport { PdfStream } from './../../primitives/pdf-stream';\nimport { DictionaryProperties } from './../../input-output/pdf-dictionary-properties';\nimport { PdfName } from './../../primitives/pdf-name';\nimport { PdfNumber } from './../../primitives/pdf-number';\nimport { PdfBoolean } from './../../primitives/pdf-boolean';\nimport { PdfDictionary } from './../../primitives/pdf-dictionary';\n/**\n * Specifies the image `format`.\n * @private\n */\n\nexport var ImageFormat;\n\n(function (ImageFormat) {\n  /**\n   * Specifies the type of `Unknown`.\n   * @hidden\n   * @private\n   */\n  ImageFormat[ImageFormat[\"Unknown\"] = 0] = \"Unknown\";\n  /**\n   * Specifies the type of `Bmp`.\n   * @hidden\n   * @private\n   */\n\n  ImageFormat[ImageFormat[\"Bmp\"] = 1] = \"Bmp\";\n  /**\n   * Specifies the type of `Emf`.\n   * @hidden\n   * @private\n   */\n\n  ImageFormat[ImageFormat[\"Emf\"] = 2] = \"Emf\";\n  /**\n   * Specifies the type of `Gif`.\n   * @hidden\n   * @private\n   */\n\n  ImageFormat[ImageFormat[\"Gif\"] = 3] = \"Gif\";\n  /**\n   * Specifies the type of `Jpeg`.\n   * @hidden\n   * @private\n   */\n\n  ImageFormat[ImageFormat[\"Jpeg\"] = 4] = \"Jpeg\";\n  /**\n   * Specifies the type of `Png`.\n   * @hidden\n   * @private\n   */\n\n  ImageFormat[ImageFormat[\"Png\"] = 5] = \"Png\";\n  /**\n   * Specifies the type of `Wmf`.\n   * @hidden\n   * @private\n   */\n\n  ImageFormat[ImageFormat[\"Wmf\"] = 6] = \"Wmf\";\n  /**\n   * Specifies the type of `Icon`.\n   * @hidden\n   * @private\n   */\n\n  ImageFormat[ImageFormat[\"Icon\"] = 7] = \"Icon\";\n})(ImageFormat || (ImageFormat = {}));\n/**\n * `Decode the image stream`.\n * @private\n */\n\n\nvar ImageDecoder =\n/** @class */\nfunction () {\n  /**\n   * Initialize the new instance for `image-decoder` class.\n   * @private\n   */\n  function ImageDecoder(stream) {\n    /**\n     * Start of file markers.\n     * @hidden\n     * @private\n     */\n    this.sof1Marker = 0x00C1;\n    this.sof2Marker = 0x00C2;\n    this.sof3Marker = 0x00C3;\n    this.sof5Marker = 0x00C5;\n    this.sof6Marker = 0x00C6;\n    this.sof7Marker = 0x00C7;\n    this.sof9Marker = 0x00C9;\n    this.sof10Marker = 0x00CA;\n    this.sof11Marker = 0x00CB;\n    this.sof13Marker = 0x00CD;\n    this.sof14Marker = 0x00CE;\n    this.sof15Marker = 0x00CF;\n    /**\n     * Specifies `format` of image.\n     * @hidden\n     * @private\n     */\n\n    this.mFormat = ImageFormat.Unknown;\n    /**\n     * `Bits per component`.\n     * @default 8\n     * @hidden\n     * @private\n     */\n\n    this.mbitsPerComponent = 8;\n    /**\n     * Internal variable for accessing fields from `DictionryProperties` class.\n     * @hidden\n     * @private\n     */\n\n    this.dictionaryProperties = new DictionaryProperties();\n    this.mStream = stream;\n    this.initialize();\n  }\n\n  Object.defineProperty(ImageDecoder.prototype, \"height\", {\n    /**\n     * Gets the `height` of image.\n     * @hidden\n     * @private\n     */\n    get: function () {\n      return this.mHeight;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ImageDecoder.prototype, \"width\", {\n    /**\n     * Gets the `width` of image.\n     * @hidden\n     * @private\n     */\n    get: function () {\n      return this.mWidth;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ImageDecoder.prototype, \"bitsPerComponent\", {\n    /**\n     * Gets `bits per component`.\n     * @hidden\n     * @private\n     */\n    get: function () {\n      return this.mbitsPerComponent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ImageDecoder.prototype, \"size\", {\n    /**\n     * Gets the `size` of an image data.\n     * @hidden\n     * @private\n     */\n    get: function () {\n      return this.mImageData.count;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ImageDecoder.prototype, \"imageData\", {\n    /**\n     * Gets the value of an `image data`.\n     * @hidden\n     * @private\n     */\n    get: function () {\n      return this.mImageData;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ImageDecoder.prototype, \"imageDataAsNumberArray\", {\n    /**\n     * Gets the value of an `image data as number array`.\n     * @hidden\n     * @private\n     */\n    get: function () {\n      return this.mImageData.internalBuffer.buffer;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * `Initialize` image data and image stream.\n   * @hidden\n   * @private\n   */\n\n  ImageDecoder.prototype.initialize = function () {\n    if (this.mFormat === ImageFormat.Unknown && this.checkIfJpeg()) {\n      this.mFormat = ImageFormat.Jpeg;\n      this.parseJpegImage();\n    }\n\n    this.reset();\n    this.mImageData = new ByteArray(this.mStream.count);\n    this.mStream.read(this.mImageData, 0, this.mImageData.count);\n  };\n  /**\n   * `Reset` stream position into 0.\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.reset = function () {\n    this.mStream.position = 0;\n  };\n  /**\n   * `Parse` Jpeg image.\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.parseJpegImage = function () {\n    this.reset();\n    var imgData = new ByteArray(this.mStream.count);\n    this.mStream.read(imgData, 0, imgData.count);\n    var i = 4;\n    var isLengthExceed = false;\n    /* tslint:disable */\n\n    var length = imgData.getBuffer(i) * 256 + imgData.getBuffer(i + 1);\n\n    while (i < imgData.count) {\n      i += length;\n\n      if (i < imgData.count) {\n        if (imgData.getBuffer(i + 1) === 192) {\n          this.mHeight = imgData.getBuffer(i + 5) * 256 + imgData.getBuffer(i + 6);\n          this.mWidth = imgData.getBuffer(i + 7) * 256 + imgData.getBuffer(i + 8);\n          return;\n        } else {\n          i += 2;\n          length = imgData.getBuffer(i) * 256 + imgData.getBuffer(i + 1);\n        }\n      } else {\n        isLengthExceed = true;\n        break;\n      }\n    }\n\n    if (isLengthExceed) {\n      this.mStream.position = 0;\n      this.skip(this.mStream, 2);\n      this.readExceededJPGImage(this.mStream);\n    }\n    /* tslint:enable */\n\n  };\n\n  Object.defineProperty(ImageDecoder.prototype, \"format\", {\n    /**\n     * Gets the image `format`.\n     * @private\n     * @hidden\n     */\n    get: function () {\n      return this.mFormat;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * `Checks if JPG`.\n   * @private\n   * @hidden\n   */\n\n  ImageDecoder.prototype.checkIfJpeg = function () {\n    this.reset();\n\n    for (var i = 0; i < ImageDecoder.mJpegHeader.length; i++) {\n      if (ImageDecoder.mJpegHeader[i] !== this.mStream.readByte(i)) {\n        return false;\n      }\n\n      this.mStream.position++;\n    }\n\n    return true;\n  };\n  /**\n   * Return image `dictionary`.\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.getImageDictionary = function () {\n    if (this.mFormat === ImageFormat.Jpeg) {\n      var tempArrayBuffer = this.imageData.internalBuffer.length;\n      this.imageStream = new PdfStream();\n      this.imageStream.isImage = true;\n      var tempString = '';\n      var decodedString = '';\n\n      for (var i = 0; i < this.imageDataAsNumberArray.byteLength; i++) {\n        tempString += String.fromCharCode(null, this.mStream.readByte(i));\n      }\n\n      for (var i = 0; i < tempString.length; i++) {\n        if (i % 2 !== 0) {\n          decodedString += tempString[i];\n        }\n      }\n\n      this.imageStream.data = [decodedString];\n      this.imageStream.compress = false;\n      this.imageStream.items.setValue(this.dictionaryProperties.type, new PdfName(this.dictionaryProperties.xObject));\n      this.imageStream.items.setValue(this.dictionaryProperties.subtype, new PdfName(this.dictionaryProperties.image));\n      this.imageStream.items.setValue(this.dictionaryProperties.width, new PdfNumber(this.width));\n      this.imageStream.items.setValue(this.dictionaryProperties.height, new PdfNumber(this.height));\n      this.imageStream.items.setValue(this.dictionaryProperties.bitsPerComponent, new PdfNumber(this.bitsPerComponent));\n      this.imageStream.items.setValue(this.dictionaryProperties.filter, new PdfName(this.dictionaryProperties.dctdecode));\n      this.imageStream.items.setValue(this.dictionaryProperties.colorSpace, new PdfName(this.getColorSpace()));\n      this.imageStream.items.setValue(this.dictionaryProperties.decodeParms, this.getDecodeParams());\n      return this.imageStream;\n    } else {\n      return this.imageStream;\n    }\n  };\n  /**\n   * Return `colorSpace` of an image.\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.getColorSpace = function () {\n    return this.dictionaryProperties.deviceRgb;\n  };\n  /**\n   * Return `decode parameters` of an image.\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.getDecodeParams = function () {\n    var decodeParams = new PdfDictionary();\n    decodeParams.items.setValue(this.dictionaryProperties.columns, new PdfNumber(this.width));\n    decodeParams.items.setValue(this.dictionaryProperties.blackIs1, new PdfBoolean(true));\n    decodeParams.items.setValue(this.dictionaryProperties.k, new PdfNumber(-1));\n    decodeParams.items.setValue(this.dictionaryProperties.predictor, new PdfNumber(15));\n    decodeParams.items.setValue(this.dictionaryProperties.bitsPerComponent, new PdfNumber(this.bitsPerComponent));\n    return decodeParams;\n  };\n  /**\n   * 'readExceededJPGImage' stream\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.readExceededJPGImage = function (stream) {\n    this.mStream = stream;\n    var isContinueReading = true;\n\n    while (isContinueReading) {\n      var marker = this.getMarker(stream);\n\n      switch (marker) {\n        case this.sof1Marker:\n        case this.sof2Marker:\n        case this.sof3Marker:\n        case this.sof5Marker:\n        case this.sof6Marker:\n        case this.sof7Marker:\n        case this.sof9Marker:\n        case this.sof10Marker:\n        case this.sof11Marker:\n        case this.sof13Marker:\n        case this.sof14Marker:\n        case this.sof15Marker:\n          stream.position += 3;\n          this.mHeight = this.mStream.readNextTwoBytes(stream);\n          this.mWidth = this.mStream.readNextTwoBytes(stream);\n          isContinueReading = false;\n          break;\n\n        default:\n          this.skipStream(stream);\n          break;\n      }\n    }\n  };\n  /**\n   * 'skip' stream\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.skip = function (stream, noOfBytes) {\n    this.mStream = stream;\n    var temp = new ByteArray(noOfBytes);\n    this.mStream.read(temp, 0, temp.count);\n  };\n  /**\n   * 'getMarker' stream\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.getMarker = function (stream) {\n    var skippedByte = 0;\n    var marker = 32;\n    marker = stream.readByte(this.mStream.position);\n    stream.position++;\n\n    while (marker !== 255) {\n      skippedByte++;\n      marker = stream.readByte(this.mStream.position);\n      stream.position++;\n    }\n\n    do {\n      marker = stream.readByte(this.mStream.position);\n      stream.position++;\n    } while (marker === 255);\n\n    return marker;\n  };\n  /**\n   * 'skipStream' stream\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.prototype.skipStream = function (stream) {\n    var markerLength = this.mStream.readNextTwoBytes(stream) - 2;\n\n    if (markerLength > 0) {\n      stream.position += markerLength;\n    }\n  };\n  /**\n   * Number array for `png header`.\n   * @hidden\n   * @private\n   */\n\n\n  ImageDecoder.mPngHeader = [137, 80, 78, 71, 13, 10, 26, 10];\n  /**\n   * Number Array for `jpeg header`.\n   * @hidden\n   * @private\n   */\n\n  ImageDecoder.mJpegHeader = [255, 216];\n  /**\n   * Number array for `gif header`.\n   * @hidden\n   * @private\n   */\n\n  ImageDecoder.GIF_HEADER = 'G,I,F,8';\n  /**\n   * Number array for `bmp header.`\n   * @hidden\n   * @private\n   */\n\n  ImageDecoder.BMP_HEADER = 'B,M';\n  return ImageDecoder;\n}();\n\nexport { ImageDecoder };","map":{"version":3,"sources":["C:/Users/khang/OneDrive/Tài liệu/JS/PersonalDashdoard/dashboard/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-pdf-export/src/implementation/graphics/images/image-decoder.js"],"names":["ByteArray","PdfStream","DictionaryProperties","PdfName","PdfNumber","PdfBoolean","PdfDictionary","ImageFormat","ImageDecoder","stream","sof1Marker","sof2Marker","sof3Marker","sof5Marker","sof6Marker","sof7Marker","sof9Marker","sof10Marker","sof11Marker","sof13Marker","sof14Marker","sof15Marker","mFormat","Unknown","mbitsPerComponent","dictionaryProperties","mStream","initialize","Object","defineProperty","prototype","get","mHeight","enumerable","configurable","mWidth","mImageData","count","internalBuffer","buffer","checkIfJpeg","Jpeg","parseJpegImage","reset","read","position","imgData","i","isLengthExceed","length","getBuffer","skip","readExceededJPGImage","mJpegHeader","readByte","getImageDictionary","tempArrayBuffer","imageData","imageStream","isImage","tempString","decodedString","imageDataAsNumberArray","byteLength","String","fromCharCode","data","compress","items","setValue","type","xObject","subtype","image","width","height","bitsPerComponent","filter","dctdecode","colorSpace","getColorSpace","decodeParms","getDecodeParams","deviceRgb","decodeParams","columns","blackIs1","k","predictor","isContinueReading","marker","getMarker","readNextTwoBytes","skipStream","noOfBytes","temp","skippedByte","markerLength","mPngHeader","GIF_HEADER","BMP_HEADER"],"mappings":"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","sourcesContent":["/**\n * ImageDecoder class\n */\nimport { ByteArray } from './byte-array';\nimport { PdfStream } from './../../primitives/pdf-stream';\nimport { DictionaryProperties } from './../../input-output/pdf-dictionary-properties';\nimport { PdfName } from './../../primitives/pdf-name';\nimport { PdfNumber } from './../../primitives/pdf-number';\nimport { PdfBoolean } from './../../primitives/pdf-boolean';\nimport { PdfDictionary } from './../../primitives/pdf-dictionary';\n/**\n * Specifies the image `format`.\n * @private\n */\nexport var ImageFormat;\n(function (ImageFormat) {\n    /**\n     * Specifies the type of `Unknown`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Unknown\"] = 0] = \"Unknown\";\n    /**\n     * Specifies the type of `Bmp`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Bmp\"] = 1] = \"Bmp\";\n    /**\n     * Specifies the type of `Emf`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Emf\"] = 2] = \"Emf\";\n    /**\n     * Specifies the type of `Gif`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Gif\"] = 3] = \"Gif\";\n    /**\n     * Specifies the type of `Jpeg`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Jpeg\"] = 4] = \"Jpeg\";\n    /**\n     * Specifies the type of `Png`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Png\"] = 5] = \"Png\";\n    /**\n     * Specifies the type of `Wmf`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Wmf\"] = 6] = \"Wmf\";\n    /**\n     * Specifies the type of `Icon`.\n     * @hidden\n     * @private\n     */\n    ImageFormat[ImageFormat[\"Icon\"] = 7] = \"Icon\";\n})(ImageFormat || (ImageFormat = {}));\n/**\n * `Decode the image stream`.\n * @private\n */\nvar ImageDecoder = /** @class */ (function () {\n    /**\n     * Initialize the new instance for `image-decoder` class.\n     * @private\n     */\n    function ImageDecoder(stream) {\n        /**\n         * Start of file markers.\n         * @hidden\n         * @private\n         */\n        this.sof1Marker = 0x00C1;\n        this.sof2Marker = 0x00C2;\n        this.sof3Marker = 0x00C3;\n        this.sof5Marker = 0x00C5;\n        this.sof6Marker = 0x00C6;\n        this.sof7Marker = 0x00C7;\n        this.sof9Marker = 0x00C9;\n        this.sof10Marker = 0x00CA;\n        this.sof11Marker = 0x00CB;\n        this.sof13Marker = 0x00CD;\n        this.sof14Marker = 0x00CE;\n        this.sof15Marker = 0x00CF;\n        /**\n         * Specifies `format` of image.\n         * @hidden\n         * @private\n         */\n        this.mFormat = ImageFormat.Unknown;\n        /**\n         * `Bits per component`.\n         * @default 8\n         * @hidden\n         * @private\n         */\n        this.mbitsPerComponent = 8;\n        /**\n         * Internal variable for accessing fields from `DictionryProperties` class.\n         * @hidden\n         * @private\n         */\n        this.dictionaryProperties = new DictionaryProperties();\n        this.mStream = stream;\n        this.initialize();\n    }\n    Object.defineProperty(ImageDecoder.prototype, \"height\", {\n        /**\n         * Gets the `height` of image.\n         * @hidden\n         * @private\n         */\n        get: function () {\n            return this.mHeight;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageDecoder.prototype, \"width\", {\n        /**\n         * Gets the `width` of image.\n         * @hidden\n         * @private\n         */\n        get: function () {\n            return this.mWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageDecoder.prototype, \"bitsPerComponent\", {\n        /**\n         * Gets `bits per component`.\n         * @hidden\n         * @private\n         */\n        get: function () {\n            return this.mbitsPerComponent;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageDecoder.prototype, \"size\", {\n        /**\n         * Gets the `size` of an image data.\n         * @hidden\n         * @private\n         */\n        get: function () {\n            return this.mImageData.count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageDecoder.prototype, \"imageData\", {\n        /**\n         * Gets the value of an `image data`.\n         * @hidden\n         * @private\n         */\n        get: function () {\n            return this.mImageData;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageDecoder.prototype, \"imageDataAsNumberArray\", {\n        /**\n         * Gets the value of an `image data as number array`.\n         * @hidden\n         * @private\n         */\n        get: function () {\n            return this.mImageData.internalBuffer.buffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * `Initialize` image data and image stream.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.initialize = function () {\n        if (this.mFormat === ImageFormat.Unknown && this.checkIfJpeg()) {\n            this.mFormat = ImageFormat.Jpeg;\n            this.parseJpegImage();\n        }\n        this.reset();\n        this.mImageData = new ByteArray(this.mStream.count);\n        this.mStream.read(this.mImageData, 0, this.mImageData.count);\n    };\n    /**\n     * `Reset` stream position into 0.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.reset = function () {\n        this.mStream.position = 0;\n    };\n    /**\n     * `Parse` Jpeg image.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.parseJpegImage = function () {\n        this.reset();\n        var imgData = new ByteArray(this.mStream.count);\n        this.mStream.read(imgData, 0, imgData.count);\n        var i = 4;\n        var isLengthExceed = false;\n        /* tslint:disable */\n        var length = imgData.getBuffer(i) * 256 + imgData.getBuffer(i + 1);\n        while (i < imgData.count) {\n            i += length;\n            if (i < imgData.count) {\n                if (imgData.getBuffer(i + 1) === 192) {\n                    this.mHeight = imgData.getBuffer(i + 5) * 256 + imgData.getBuffer(i + 6);\n                    this.mWidth = imgData.getBuffer(i + 7) * 256 + imgData.getBuffer(i + 8);\n                    return;\n                }\n                else {\n                    i += 2;\n                    length = imgData.getBuffer(i) * 256 + imgData.getBuffer(i + 1);\n                }\n            }\n            else {\n                isLengthExceed = true;\n                break;\n            }\n        }\n        if (isLengthExceed) {\n            this.mStream.position = 0;\n            this.skip(this.mStream, 2);\n            this.readExceededJPGImage(this.mStream);\n        }\n        /* tslint:enable */\n    };\n    Object.defineProperty(ImageDecoder.prototype, \"format\", {\n        /**\n         * Gets the image `format`.\n         * @private\n         * @hidden\n         */\n        get: function () {\n            return this.mFormat;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * `Checks if JPG`.\n     * @private\n     * @hidden\n     */\n    ImageDecoder.prototype.checkIfJpeg = function () {\n        this.reset();\n        for (var i = 0; i < ImageDecoder.mJpegHeader.length; i++) {\n            if (ImageDecoder.mJpegHeader[i] !== this.mStream.readByte(i)) {\n                return false;\n            }\n            this.mStream.position++;\n        }\n        return true;\n    };\n    /**\n     * Return image `dictionary`.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.getImageDictionary = function () {\n        if (this.mFormat === ImageFormat.Jpeg) {\n            var tempArrayBuffer = this.imageData.internalBuffer.length;\n            this.imageStream = new PdfStream();\n            this.imageStream.isImage = true;\n            var tempString = '';\n            var decodedString = '';\n            for (var i = 0; i < this.imageDataAsNumberArray.byteLength; i++) {\n                tempString += String.fromCharCode(null, this.mStream.readByte(i));\n            }\n            for (var i = 0; i < tempString.length; i++) {\n                if (i % 2 !== 0) {\n                    decodedString += tempString[i];\n                }\n            }\n            this.imageStream.data = [decodedString];\n            this.imageStream.compress = false;\n            this.imageStream.items.setValue(this.dictionaryProperties.type, new PdfName(this.dictionaryProperties.xObject));\n            this.imageStream.items.setValue(this.dictionaryProperties.subtype, new PdfName(this.dictionaryProperties.image));\n            this.imageStream.items.setValue(this.dictionaryProperties.width, new PdfNumber(this.width));\n            this.imageStream.items.setValue(this.dictionaryProperties.height, new PdfNumber(this.height));\n            this.imageStream.items.setValue(this.dictionaryProperties.bitsPerComponent, new PdfNumber(this.bitsPerComponent));\n            this.imageStream.items.setValue(this.dictionaryProperties.filter, new PdfName(this.dictionaryProperties.dctdecode));\n            this.imageStream.items.setValue(this.dictionaryProperties.colorSpace, new PdfName(this.getColorSpace()));\n            this.imageStream.items.setValue(this.dictionaryProperties.decodeParms, this.getDecodeParams());\n            return this.imageStream;\n        }\n        else {\n            return this.imageStream;\n        }\n    };\n    /**\n     * Return `colorSpace` of an image.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.getColorSpace = function () {\n        return this.dictionaryProperties.deviceRgb;\n    };\n    /**\n     * Return `decode parameters` of an image.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.getDecodeParams = function () {\n        var decodeParams = new PdfDictionary();\n        decodeParams.items.setValue(this.dictionaryProperties.columns, new PdfNumber(this.width));\n        decodeParams.items.setValue(this.dictionaryProperties.blackIs1, new PdfBoolean(true));\n        decodeParams.items.setValue(this.dictionaryProperties.k, new PdfNumber(-1));\n        decodeParams.items.setValue(this.dictionaryProperties.predictor, new PdfNumber(15));\n        decodeParams.items.setValue(this.dictionaryProperties.bitsPerComponent, new PdfNumber(this.bitsPerComponent));\n        return decodeParams;\n    };\n    /**\n     * 'readExceededJPGImage' stream\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.readExceededJPGImage = function (stream) {\n        this.mStream = stream;\n        var isContinueReading = true;\n        while (isContinueReading) {\n            var marker = this.getMarker(stream);\n            switch (marker) {\n                case this.sof1Marker:\n                case this.sof2Marker:\n                case this.sof3Marker:\n                case this.sof5Marker:\n                case this.sof6Marker:\n                case this.sof7Marker:\n                case this.sof9Marker:\n                case this.sof10Marker:\n                case this.sof11Marker:\n                case this.sof13Marker:\n                case this.sof14Marker:\n                case this.sof15Marker:\n                    stream.position += 3;\n                    this.mHeight = this.mStream.readNextTwoBytes(stream);\n                    this.mWidth = this.mStream.readNextTwoBytes(stream);\n                    isContinueReading = false;\n                    break;\n                default:\n                    this.skipStream(stream);\n                    break;\n            }\n        }\n    };\n    /**\n     * 'skip' stream\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.skip = function (stream, noOfBytes) {\n        this.mStream = stream;\n        var temp = new ByteArray(noOfBytes);\n        this.mStream.read(temp, 0, temp.count);\n    };\n    /**\n     * 'getMarker' stream\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.getMarker = function (stream) {\n        var skippedByte = 0;\n        var marker = 32;\n        marker = stream.readByte(this.mStream.position);\n        stream.position++;\n        while (marker !== 255) {\n            skippedByte++;\n            marker = stream.readByte(this.mStream.position);\n            stream.position++;\n        }\n        do {\n            marker = stream.readByte(this.mStream.position);\n            stream.position++;\n        } while (marker === 255);\n        return marker;\n    };\n    /**\n     * 'skipStream' stream\n     * @hidden\n     * @private\n     */\n    ImageDecoder.prototype.skipStream = function (stream) {\n        var markerLength = this.mStream.readNextTwoBytes(stream) - 2;\n        if (markerLength > 0) {\n            stream.position += markerLength;\n        }\n    };\n    /**\n     * Number array for `png header`.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.mPngHeader = [137, 80, 78, 71, 13, 10, 26, 10];\n    /**\n     * Number Array for `jpeg header`.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.mJpegHeader = [255, 216];\n    /**\n     * Number array for `gif header`.\n     * @hidden\n     * @private\n     */\n    ImageDecoder.GIF_HEADER = 'G,I,F,8';\n    /**\n     * Number array for `bmp header.`\n     * @hidden\n     * @private\n     */\n    ImageDecoder.BMP_HEADER = 'B,M';\n    return ImageDecoder;\n}());\nexport { ImageDecoder };\n"]},"metadata":{},"sourceType":"module"}