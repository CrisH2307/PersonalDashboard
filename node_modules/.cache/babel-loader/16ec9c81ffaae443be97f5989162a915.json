{"ast":null,"code":"import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\n\nvar InlineEditRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for render module\n   *\n   * @param {IGrid} parent - returns the IGrid\n   */\n  function InlineEditRender(parent) {\n    this.parent = parent;\n  }\n\n  InlineEditRender.prototype.addNew = function (elements, args) {\n    this.isEdit = false;\n    var tbody;\n    var mTbody = getMovableTbody(this.parent);\n    var frTbody = getFrozenRightTbody(this.parent);\n    var isFrozenGrid = this.parent.isFrozenGrid();\n    var isVirtualFrozen = isFrozenGrid && this.parent.enableColumnVirtualization && args.isScroll;\n\n    if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n      tbody = isVirtualFrozen ? this.parent.getMovableHeaderTbody() : this.parent.getHeaderTable().querySelector(literals.tbody);\n    } else {\n      tbody = isVirtualFrozen ? this.parent.getMovableContentTbody() : this.parent.getContentTable().querySelector(literals.tbody);\n    }\n\n    args.row = this.parent.createElement('tr', {\n      className: 'e-row e-addedrow'\n    });\n\n    if (tbody.querySelector('.e-emptyrow')) {\n      var emptyRow = tbody.querySelector('.e-emptyrow');\n      emptyRow.parentNode.removeChild(emptyRow);\n\n      if (isFrozenGrid && !isVirtualFrozen) {\n        var moveTbody = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n        moveTbody.firstElementChild.parentNode.removeChild(moveTbody.firstElementChild);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n          frTbody_1.firstElementChild.parentNode.removeChild(frTbody_1.firstElementChild);\n        }\n      }\n    }\n\n    if (this.parent.editSettings.newRowPosition === 'Top') {\n      tbody.insertBefore(args.row, tbody.firstChild);\n    } else {\n      tbody.appendChild(args.row);\n    }\n\n    args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n    this.parent.editModule.checkLastRow(args.row, args);\n\n    if (isFrozenGrid && !isVirtualFrozen) {\n      var mEle = this.renderMovableform(args.row, args);\n\n      if (this.parent.editSettings.newRowPosition === 'Top') {\n        mTbody.insertBefore(mEle, mTbody.firstChild);\n      } else {\n        mTbody.appendChild(mEle);\n      }\n\n      args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n      mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n\n      if (frTbody) {\n        var frEle = this.renderFrozenRightForm(args.row, args);\n\n        if (this.parent.editSettings.newRowPosition === 'Top') {\n          frTbody.insertBefore(frEle, frTbody.firstChild);\n        } else {\n          frTbody.appendChild(frEle);\n        }\n\n        var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n        args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n        frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n      }\n\n      if (this.parent.height === 'auto') {\n        this.parent.notify(events.frozenHeight, {});\n      }\n    }\n  };\n\n  InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n    var frEle = ele.cloneNode(true);\n    var form = args.frozenRightForm = frEle.querySelector('form');\n\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, args.rowData, false);\n      return frEle;\n    }\n\n    this.renderRightFrozen(ele, frEle);\n    frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n    return frEle;\n  };\n\n  InlineEditRender.prototype.renderMovableform = function (ele, args) {\n    var mEle = ele.cloneNode(true);\n    var form = args.movableForm = mEle.querySelector('form');\n\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, args.rowData, false);\n      return mEle;\n    }\n\n    this.renderMovable(ele, mEle);\n    mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n    return mEle;\n  };\n\n  InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n    td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n\n    if (this.parent.getFrozenMode() === literals.leftRight) {\n      td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n    }\n\n    return td;\n  };\n\n  InlineEditRender.prototype.getFreezeRightRow = function (row) {\n    var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n    var fCont = this.parent.getFrozenLeftContentTbody();\n    var fHdr = this.parent.getFrozenHeaderTbody();\n    var frHdr = this.parent.getFrozenRightHeaderTbody();\n    var frCont = this.parent.getFrozenRightContentTbody();\n\n    if (fCont.contains(row) || fHdr.contains(row)) {\n      return this.parent.getFrozenRightRowByIndex(idx);\n    } else if (frCont.contains(row) || frHdr.contains(row)) {\n      return this.parent.getRowByIndex(idx);\n    }\n\n    return row;\n  };\n\n  InlineEditRender.prototype.getFreezeRow = function (row) {\n    if (this.parent.isFrozenGrid()) {\n      var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n      var fCont = this.parent.getFrozenLeftContentTbody();\n      var mCont = this.parent.getMovableContentTbody();\n      var fHdr = this.parent.getFrozenHeaderTbody();\n      var mHdr = this.parent.getMovableHeaderTbody();\n\n      if (fCont.contains(row) || fHdr.contains(row)) {\n        return this.parent.getMovableRowByIndex(idx);\n      } else if (mCont.contains(row) || mHdr.contains(row)) {\n        return this.parent.getRowByIndex(idx);\n      }\n    }\n\n    return row;\n  };\n\n  InlineEditRender.prototype.update = function (elements, args) {\n    this.isEdit = true;\n    var isCustomFormValidation = args.isCustomFormValidation;\n    var isScroll = args.isScroll;\n\n    if (!isScroll && (closest(args.row, '.' + literals.movableContent) || closest(args.row, '.' + literals.movableHeader))) {\n      args.row = this.getFreezeRow(args.row);\n    }\n\n    if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n      args.row = this.getFreezeRightRow(args.row);\n    }\n\n    var isVirtualFrozen = this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && isScroll;\n    var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n    args.row.innerHTML = '';\n\n    if (!isVirtualFrozen && !isCustomFormValidation) {\n      tdElement = this.updateFreezeEdit(args.row, tdElement);\n    }\n\n    args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n    args.row.classList.add(literals.editedRow);\n    this.parent.editModule.checkLastRow(args.row, args);\n\n    if (!isVirtualFrozen && !isCustomFormValidation) {\n      this.refreshFreezeEdit(args.row, args);\n    }\n  };\n\n  InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n    var td = row.firstChild;\n\n    if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n      td.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.colGroup).innerHTML;\n    }\n\n    var fCls;\n    var cont;\n    var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n\n    if (this.parent.isFrozenGrid()) {\n      if (idx < this.parent.frozenRows) {\n        cont = this.parent.getHeaderContent();\n        fCls = '.' + literals.frozenHeader;\n      } else {\n        cont = this.parent.getContent();\n        fCls = '.' + literals.frozenContent;\n      }\n\n      var mTd = td.cloneNode(true);\n      var frTd = td.cloneNode(true);\n      var form = args.movableForm = mTd.querySelector('form');\n\n      if (this.parent.editSettings.template) {\n        this.refreshEditForm(form, args.rowData);\n      }\n\n      var fRows = void 0;\n      var frRows = void 0;\n\n      if (cont.querySelector(fCls).contains(row)) {\n        fRows = this.parent.getMovableRowByIndex(idx);\n        this.updateFrozenCont(fRows, td, mTd);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          args.frozenRightForm = frTd.querySelector('form');\n          this.refreshEditForm(args.frozenRightForm, args.rowData);\n          frRows = this.parent.getFrozenRightRowByIndex(idx);\n          this.updateFrozenRightCont(frRows, td, frTd);\n        }\n      } else {\n        fRows = this.parent.getRowByIndex(idx);\n        this.updateFrozenCont(fRows, mTd, td);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          args.frozenRightForm = frTd.querySelector('form');\n          this.refreshEditForm(args.frozenRightForm, args.rowData);\n          frRows = this.parent.getFrozenRightRowByIndex(idx);\n          this.updateFrozenRightCont(frRows, frTd, td);\n        }\n      }\n\n      fRows.appendChild(mTd);\n      fRows.classList.add(literals.editedRow);\n\n      if (this.parent.getFrozenMode() === literals.leftRight) {\n        frRows.appendChild(frTd);\n        frRows.classList.add(literals.editedRow);\n        alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n      }\n\n      alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n    }\n  };\n\n  InlineEditRender.prototype.refreshEditForm = function (form, data) {\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, data, false);\n    }\n  };\n\n  InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n    row.innerHTML = '';\n    this.renderRightFrozen(ele, frEle);\n    frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n    ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n    frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n  };\n\n  InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n    row.innerHTML = '';\n    this.renderMovable(ele, mEle);\n    mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n    ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n    mEle.setAttribute('colspan', this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - this.parent.getVisibleFrozenColumns() + '');\n  };\n\n  InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n    frEle.querySelector('tr').innerHTML = '';\n    var cols = this.parent.getColumns();\n    var k = 0;\n\n    for (var i = 0; i < cols.length; i++, k++) {\n      if (cols[i].getFreezeTableName() === literals.frozenRight) {\n        var index = k - this.parent.getMovableColumnsCount();\n        frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n        k--;\n      }\n    }\n  };\n\n  InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n    mEle.querySelector('tr').innerHTML = '';\n    var cols = this.parent.getColumns();\n    var k = 0;\n\n    for (var i = 0; i < cols.length; i++, k++) {\n      if (cols[i].getFreezeTableName() === 'movable') {\n        mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n        k--;\n      }\n    }\n  }; // eslint-disable-next-line max-len\n\n\n  InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n    var gObj = this.parent;\n    var gLen = 0;\n    var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\n    if (gObj.allowGrouping) {\n      gLen = gObj.groupSettings.columns.length;\n    }\n\n    var td = this.parent.createElement('td', {\n      className: 'e-editcell e-normaledit',\n      attrs: {\n        colspan: (gObj.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - gObj.getVisibleFrozenColumns() + this.parent.getIndentCount()).toString()\n      }\n    });\n    var form = args.form = this.parent.createElement('form', {\n      id: gObj.element.id + 'EditForm',\n      className: 'e-gridform'\n    });\n\n    if (this.parent.editSettings.template) {\n      this.appendChildren(form, args.rowData, isFrozen);\n      td.appendChild(form);\n      return td;\n    }\n\n    var table = this.parent.createElement('table', {\n      className: 'e-table e-inline-edit',\n      attrs: {\n        cellspacing: '0.25'\n      }\n    });\n    table.appendChild(gObj.getContentTable().querySelector(literals.colGroup).cloneNode(true));\n    var tbody = this.parent.createElement(literals.tbody);\n    var tr = this.parent.createElement('tr');\n    var i = 0;\n\n    if (isDetail) {\n      tr.insertBefore(this.parent.createElement('td', {\n        className: 'e-detailrowcollapse'\n      }), tr.firstChild);\n    }\n\n    if (gObj.isRowDragable()) {\n      tr.appendChild(this.parent.createElement('td', {\n        className: 'e-dragindentcell'\n      }));\n    }\n\n    while (i < gLen) {\n      tr.appendChild(this.parent.createElement('td', {\n        className: 'e-indentcell'\n      }));\n      i++;\n    }\n\n    var m = 0;\n    i = 0;\n    var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n    var cols = args.isCustomFormValidation ? this.parent.columnModel : gObj.getColumns();\n\n    while (isEdit && m < tdElement.length && i < cols.length || i < cols.length) {\n      var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n      var col = cols[i];\n\n      if (isVirtualFrozen && col.getFreezeTableName() !== 'movable' || args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field)) {\n        i++;\n        continue;\n      }\n\n      var td_1 = this.parent.createElement('td', {\n        className: literals.rowCell,\n        attrs: {\n          style: 'text-align:' + (col.textAlign ? col.textAlign : ''),\n          'colspan': span ? span : ''\n        }\n      });\n\n      if (col.visible) {\n        td_1.appendChild(elements[col.uid]);\n\n        if (this.parent.rowRenderingMode === 'Vertical') {\n          setStyleAndAttributes(td_1, {\n            'data-cell': col.headerText\n          });\n\n          if (i === 0) {\n            td_1.classList.add('e-responsive-editcell');\n          }\n        }\n\n        if (col.editType === 'booleanedit') {\n          td_1.classList.add('e-boolcell');\n        } else if (col.commands || col.commandsTemplate) {\n          addClass([td_1], 'e-unboundcell');\n        }\n      } else {\n        td_1.classList.add('e-hide');\n      }\n\n      tr.appendChild(td_1);\n      i = span ? i + parseInt(span, 10) : i + 1;\n      m++;\n    }\n\n    tbody.appendChild(tr);\n    table.appendChild(tbody);\n    form.appendChild(table);\n    td.appendChild(form);\n    return td;\n  };\n\n  InlineEditRender.prototype.removeEventListener = function () {//To destroy the renderer\n  };\n\n  InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n    var _this = this;\n\n    var dummyData = extend({}, data, {\n      isAdd: !this.isEdit,\n      isFrozen: isFrozen\n    }, true);\n    var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n\n    if (this.parent.isReact && typeof this.parent.editSettings.template !== 'string') {\n      this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n      this.parent.renderTemplates();\n    } else {\n      appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n    } // eslint-disable-next-line\n\n\n    var setRules = function () {\n      var cols = _this.parent.getColumns();\n\n      for (var i = 0; i < cols.length; i++) {\n        if (cols[i].validationRules) {\n          _this.parent.editModule.formObj.rules[cols[i].field] = cols[i].validationRules;\n        }\n      }\n    };\n  };\n\n  return InlineEditRender;\n}();\n\nexport { InlineEditRender };","map":{"version":3,"sources":["C:/Users/khang/OneDrive/Tài liệu/JS/PersonalDashdoard/dashboard/node_modules/@syncfusion/ej2-react-grids/node_modules/@syncfusion/ej2-grids/src/grid/renderer/inline-edit-renderer.js"],"names":["isNullOrUndefined","addClass","extend","closest","events","appendChildren","alignFrozenEditForm","getMovableTbody","getFrozenRightTbody","setStyleAndAttributes","literals","InlineEditRender","parent","prototype","addNew","elements","args","isEdit","tbody","mTbody","frTbody","isFrozenGrid","isVirtualFrozen","enableColumnVirtualization","isScroll","frozenRows","editSettings","newRowPosition","getMovableHeaderTbody","getHeaderTable","querySelector","getMovableContentTbody","getContentTable","row","createElement","className","emptyRow","parentNode","removeChild","moveTbody","getContent","movableContent","firstElementChild","getFrozenMode","leftRight","frTbody_1","insertBefore","firstChild","appendChild","getEditElement","undefined","editModule","checkLastRow","mEle","renderMovableform","setAttribute","getVisibleFrozenColumns","getVisibleColumns","length","frEle","renderFrozenRightForm","colSpan","getFrozenRightColumnsCount","height","notify","frozenHeight","ele","cloneNode","form","frozenRightForm","template","innerHTML","rowData","renderRightFrozen","colGroup","getHeaderContent","movableForm","renderMovable","movableHeader","updateFreezeEdit","td","concat","slice","call","getFreezeRow","querySelectorAll","getFreezeRightRow","idx","parseInt","getAttribute","ariaRowIndex","fCont","getFrozenLeftContentTbody","fHdr","getFrozenHeaderTbody","frHdr","getFrozenRightHeaderTbody","frCont","getFrozenRightContentTbody","contains","getFrozenRightRowByIndex","getRowByIndex","mCont","mHdr","getMovableRowByIndex","update","isCustomFormValidation","tdElement","classList","add","editedRow","refreshFreezeEdit","frozenHeader","fCls","cont","frozenContent","mTd","frTd","refreshEditForm","fRows","frRows","updateFrozenCont","updateFrozenRightCont","data","getCurrentVisibleColumns","cols","getColumns","k","i","getFreezeTableName","frozenRight","index","getMovableColumnsCount","children","isFrozen","gObj","gLen","isDetail","detailTemplate","childGrid","allowGrouping","groupSettings","columns","attrs","colspan","getIndentCount","toString","id","element","table","cellspacing","tr","isRowDragable","m","columnModel","span","col","commands","commandsTemplate","field","td_1","rowCell","style","textAlign","visible","uid","rowRenderingMode","headerText","editType","removeEventListener","_this","dummyData","isAdd","editTemplateID","isReact","getEditTemplate","renderTemplates","setRules","validationRules","formObj","rules"],"mappings":"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","sourcesContent":["import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - returns the IGrid\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var tbody;\n        var mTbody = getMovableTbody(this.parent);\n        var frTbody = getFrozenRightTbody(this.parent);\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var isVirtualFrozen = isFrozenGrid && this.parent.enableColumnVirtualization && args.isScroll;\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = isVirtualFrozen ? this.parent.getMovableHeaderTbody() : this.parent.getHeaderTable().querySelector(literals.tbody);\n        }\n        else {\n            tbody = isVirtualFrozen ? this.parent.getMovableContentTbody() : this.parent.getContentTable().querySelector(literals.tbody);\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (isFrozenGrid && !isVirtualFrozen) {\n                var moveTbody = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n                    (frTbody_1.firstElementChild).parentNode.removeChild(frTbody_1.firstElementChild);\n                }\n            }\n        }\n        if (this.parent.editSettings.newRowPosition === 'Top') {\n            tbody.insertBefore(args.row, tbody.firstChild);\n        }\n        else {\n            tbody.appendChild(args.row);\n        }\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (isFrozenGrid && !isVirtualFrozen) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.editSettings.newRowPosition === 'Top') {\n                mTbody.insertBefore(mEle, mTbody.firstChild);\n            }\n            else {\n                mTbody.appendChild(mEle);\n            }\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (frTbody) {\n                var frEle = this.renderFrozenRightForm(args.row, args);\n                if (this.parent.editSettings.newRowPosition === 'Top') {\n                    frTbody.insertBefore(frEle, frTbody.firstChild);\n                }\n                else {\n                    frTbody.appendChild(frEle);\n                }\n                var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n                args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n                frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n            }\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n        var frEle = ele.cloneNode(true);\n        var form = args.frozenRightForm = frEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return frEle;\n        }\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        return frEle;\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n        }\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRightRow = function (row) {\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        var fCont = this.parent.getFrozenLeftContentTbody();\n        var fHdr = this.parent.getFrozenHeaderTbody();\n        var frHdr = this.parent.getFrozenRightHeaderTbody();\n        var frCont = this.parent.getFrozenRightContentTbody();\n        if (fCont.contains(row) || fHdr.contains(row)) {\n            return this.parent.getFrozenRightRowByIndex(idx);\n        }\n        else if (frCont.contains(row) || frHdr.contains(row)) {\n            return this.parent.getRowByIndex(idx);\n        }\n        return row;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.isFrozenGrid()) {\n            var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n            var fCont = this.parent.getFrozenLeftContentTbody();\n            var mCont = this.parent.getMovableContentTbody();\n            var fHdr = this.parent.getFrozenHeaderTbody();\n            var mHdr = this.parent.getMovableHeaderTbody();\n            if (fCont.contains(row) || fHdr.contains(row)) {\n                return this.parent.getMovableRowByIndex(idx);\n            }\n            else if (mCont.contains(row) || mHdr.contains(row)) {\n                return this.parent.getRowByIndex(idx);\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        var isCustomFormValidation = args.isCustomFormValidation;\n        var isScroll = args.isScroll;\n        if (!isScroll && (closest(args.row, '.' + literals.movableContent) || closest(args.row, '.' + literals.movableHeader))) {\n            args.row = this.getFreezeRow(args.row);\n        }\n        if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n            args.row = this.getFreezeRightRow(args.row);\n        }\n        var isVirtualFrozen = this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && isScroll;\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            tdElement = this.updateFreezeEdit(args.row, tdElement);\n        }\n        args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n        args.row.classList.add(literals.editedRow);\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            this.refreshFreezeEdit(args.row, args);\n        }\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n            td.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).\n                querySelector(literals.colGroup).innerHTML;\n        }\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        if (this.parent.isFrozenGrid()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.' + literals.frozenHeader;\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.' + literals.frozenContent;\n            }\n            var mTd = td.cloneNode(true);\n            var frTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                this.refreshEditForm(form, args.rowData);\n            }\n            var fRows = void 0;\n            var frRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, td, frTd);\n                }\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, frTd, td);\n                }\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add(literals.editedRow);\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                frRows.appendChild(frTd);\n                frRows.classList.add(literals.editedRow);\n                alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n            }\n            alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n        }\n    };\n    InlineEditRender.prototype.refreshEditForm = function (form, data) {\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, data, false);\n        }\n    };\n    InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n        row.innerHTML = '';\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n        frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n        frEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === literals.frozenRight) {\n                var index = k - this.parent.getMovableColumnsCount();\n                frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n                k--;\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        mEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === 'movable') {\n                mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n                k--;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: {\n                colspan: (gObj.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - gObj.getVisibleFrozenColumns()\n                    + this.parent.getIndentCount()).toString()\n            }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector(literals.colGroup).cloneNode(true));\n        var tbody = this.parent.createElement(literals.tbody);\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n        var cols = args.isCustomFormValidation ? this.parent.columnModel : gObj.getColumns();\n        while ((isEdit && m < tdElement.length && i < cols.length) || i < cols.length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = cols[i];\n            if ((isVirtualFrozen && col.getFreezeTableName() !== 'movable')\n                || (args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field))) {\n                i++;\n                continue;\n            }\n            var td_1 = this.parent.createElement('td', {\n                className: literals.rowCell, attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (this.parent.rowRenderingMode === 'Vertical') {\n                    setStyleAndAttributes(td_1, { 'data-cell': col.headerText });\n                    if (i === 0) {\n                        td_1.classList.add('e-responsive-editcell');\n                    }\n                }\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var _this = this;\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        if (this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string') {\n            this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n        }\n        // eslint-disable-next-line\n        var setRules = function () {\n            var cols = _this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].validationRules) {\n                    _this.parent.editModule.formObj.rules[cols[i].field] =\n                        cols[i].validationRules;\n                }\n            }\n        };\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n"]},"metadata":{},"sourceType":"module"}