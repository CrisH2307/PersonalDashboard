{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { extend } from './util';\nimport { Property, Complex, NotifyPropertyChanges, Event } from './notify-property-change';\nimport { Browser } from './browser';\nimport { Base } from './base';\nimport { ChildProperty } from './child-property';\nimport { EventHandler } from './event-handler';\n/**\n * SwipeSettings is a framework module that provides support to handle swipe event like swipe up, swipe right, etc..,\n */\n\nvar SwipeSettings =\n/** @class */\nfunction (_super) {\n  __extends(SwipeSettings, _super);\n\n  function SwipeSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(50)], SwipeSettings.prototype, \"swipeThresholdDistance\", void 0);\n\n  return SwipeSettings;\n}(ChildProperty);\n\nexport { SwipeSettings };\nvar swipeRegex = /(Up|Down)/;\n/**\n * Touch class provides support to handle the touch event like tap, double tap, tap hold, etc..,\n * ```typescript\n *    let node: HTMLElement;\n * let touchObj: Touch = new Touch({\n *    element: node,\n *    tap: function (e) {\n *        // tap handler function code\n *    }\n *    tapHold: function (e) {\n *        // tap hold handler function code\n *    }\n *    scroll: function (e) {\n *        // scroll handler function code\n *    }\n *    swipe: function (e) {\n *        // swipe handler function code\n *    }\n * });\n * ```\n */\n\nvar Touch =\n/** @class */\nfunction (_super) {\n  __extends(Touch, _super);\n  /* End-Properties */\n\n\n  function Touch(element, options) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.touchAction = true;\n    _this.tapCount = 0;\n    /**\n     *\n     * @param {MouseEventArgs | TouchEventArgs} evt ?\n     * @returns {void} ?\n     */\n\n    _this.startEvent = function (evt) {\n      if (_this.touchAction === true) {\n        var point = _this.updateChangeTouches(evt);\n\n        if (evt.changedTouches !== undefined) {\n          _this.touchAction = false;\n        }\n\n        _this.isTouchMoved = false;\n        _this.movedDirection = '';\n        _this.startPoint = _this.lastMovedPoint = {\n          clientX: point.clientX,\n          clientY: point.clientY\n        };\n        _this.startEventData = point;\n        _this.hScrollLocked = _this.vScrollLocked = false;\n        _this.tStampStart = Date.now();\n        _this.timeOutTapHold = setTimeout(function () {\n          _this.tapHoldEvent(evt);\n        }, _this.tapHoldThreshold);\n        EventHandler.add(_this.element, Browser.touchMoveEvent, _this.moveEvent, _this);\n        EventHandler.add(_this.element, Browser.touchEndEvent, _this.endEvent, _this);\n        EventHandler.add(_this.element, Browser.touchCancelEvent, _this.cancelEvent, _this);\n      }\n    };\n    /**\n     *\n     * @param {MouseEventArgs | TouchEventArgs} evt ?\n     * @returns {void} ?\n     */\n\n\n    _this.moveEvent = function (evt) {\n      var point = _this.updateChangeTouches(evt);\n\n      _this.movedPoint = point;\n      _this.isTouchMoved = !(point.clientX === _this.startPoint.clientX && point.clientY === _this.startPoint.clientY);\n      var eScrollArgs = {};\n\n      if (_this.isTouchMoved) {\n        clearTimeout(_this.timeOutTapHold);\n\n        _this.calcScrollPoints(evt);\n\n        var scrollArg = {\n          startEvents: _this.startEventData,\n          originalEvent: evt,\n          startX: _this.startPoint.clientX,\n          startY: _this.startPoint.clientY,\n          distanceX: _this.distanceX,\n          distanceY: _this.distanceY,\n          scrollDirection: _this.scrollDirection,\n          velocity: _this.getVelocity(point)\n        };\n        eScrollArgs = extend(eScrollArgs, {}, scrollArg);\n\n        _this.trigger('scroll', eScrollArgs);\n\n        _this.lastMovedPoint = {\n          clientX: point.clientX,\n          clientY: point.clientY\n        };\n      }\n    };\n    /**\n     *\n     * @param {MouseEventArgs | TouchEventArgs} evt ?\n     * @returns {void} ?\n     */\n\n\n    _this.cancelEvent = function (evt) {\n      clearTimeout(_this.timeOutTapHold);\n      clearTimeout(_this.timeOutTap);\n      _this.tapCount = 0;\n\n      _this.swipeFn(evt);\n\n      EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);\n    };\n    /**\n     *\n     * @param {MouseEventArgs | TouchEventArgs} evt ?\n     * @returns {void} ?\n     */\n\n\n    _this.endEvent = function (evt) {\n      _this.swipeFn(evt);\n\n      if (!_this.isTouchMoved) {\n        if (typeof _this.tap === 'function') {\n          _this.trigger('tap', {\n            originalEvent: evt,\n            tapCount: ++_this.tapCount\n          });\n\n          _this.timeOutTap = setTimeout(function () {\n            _this.tapCount = 0;\n          }, _this.tapThreshold);\n        }\n      }\n\n      _this.modeclear();\n    };\n    /**\n     *\n     * @param {MouseEventArgs | TouchEventArgs} evt ?\n     * @returns {void} ?\n     */\n\n\n    _this.swipeFn = function (evt) {\n      clearTimeout(_this.timeOutTapHold);\n      clearTimeout(_this.timeOutTap);\n\n      var point = _this.updateChangeTouches(evt);\n\n      var diffX = point.clientX - _this.startPoint.clientX;\n      var diffY = point.clientY - _this.startPoint.clientY;\n      diffX = Math.floor(diffX < 0 ? -1 * diffX : diffX);\n      diffY = Math.floor(diffY < 0 ? -1 * diffY : diffX);\n      _this.isTouchMoved = diffX > 1 || diffY > 1;\n      _this.endPoint = point;\n\n      _this.calcPoints(evt);\n\n      var swipeArgs = {\n        originalEvent: evt,\n        startEvents: _this.startEventData,\n        startX: _this.startPoint.clientX,\n        startY: _this.startPoint.clientY,\n        distanceX: _this.distanceX,\n        distanceY: _this.distanceY,\n        swipeDirection: _this.movedDirection,\n        velocity: _this.getVelocity(point)\n      };\n\n      if (_this.isTouchMoved) {\n        var eSwipeArgs = void 0;\n        var tDistance = _this.swipeSettings.swipeThresholdDistance; // eslint-disable-next-line\n\n        eSwipeArgs = extend(eSwipeArgs, _this.defaultArgs, swipeArgs);\n        var canTrigger = false;\n        var ele = _this.element;\n\n        var scrollBool = _this.isScrollable(ele);\n\n        var moved = swipeRegex.test(_this.movedDirection);\n\n        if (tDistance < _this.distanceX && !moved || tDistance < _this.distanceY && moved) {\n          if (!scrollBool) {\n            canTrigger = true;\n          } else {\n            canTrigger = _this.checkSwipe(ele, moved);\n          }\n        }\n\n        if (canTrigger) {\n          _this.trigger('swipe', eSwipeArgs);\n        }\n      }\n\n      _this.modeclear();\n    };\n\n    _this.modeclear = function () {\n      _this.modeClear = setTimeout(function () {\n        _this.touchAction = true;\n      }, typeof _this.tap !== 'function' ? 0 : 20);\n      _this.lastTapTime = new Date().getTime();\n      EventHandler.remove(_this.element, Browser.touchMoveEvent, _this.moveEvent);\n      EventHandler.remove(_this.element, Browser.touchEndEvent, _this.endEvent);\n      EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);\n    };\n\n    _this.bind();\n\n    return _this;\n  } // triggers when property changed\n\n  /**\n   *\n   * @private\n   * @param {TouchModel} newProp ?\n   * @param {TouchModel} oldProp ?\n   * @returns {void} ?\n   */\n  // eslint-disable-next-line\n\n\n  Touch.prototype.onPropertyChanged = function (newProp, oldProp) {//No Code to handle\n  };\n\n  Touch.prototype.bind = function () {\n    this.wireEvents();\n\n    if (Browser.isIE) {\n      this.element.classList.add('e-block-touch');\n    }\n  };\n  /**\n   * To destroy the touch instance.\n   *\n   * @returns {void}\n   */\n\n\n  Touch.prototype.destroy = function () {\n    this.unwireEvents();\n\n    _super.prototype.destroy.call(this);\n  }; // Need to changes the event binding once we updated the event handler.\n\n\n  Touch.prototype.wireEvents = function () {\n    EventHandler.add(this.element, Browser.touchStartEvent, this.startEvent, this);\n  };\n\n  Touch.prototype.unwireEvents = function () {\n    EventHandler.remove(this.element, Browser.touchStartEvent, this.startEvent);\n  };\n  /**\n   * Returns module name as touch\n   *\n   * @returns {string} ?\n   * @private\n   */\n\n\n  Touch.prototype.getModuleName = function () {\n    return 'touch';\n  };\n  /**\n   * Returns if the HTML element is Scrollable.\n   *\n   * @param {HTMLElement} element - HTML Element to check if Scrollable.\n   * @returns {boolean} ?\n   */\n\n\n  Touch.prototype.isScrollable = function (element) {\n    var eleStyle = getComputedStyle(element);\n    var style = eleStyle.overflow + eleStyle.overflowX + eleStyle.overflowY;\n\n    if (/(auto|scroll)/.test(style)) {\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   *\n   * @param {MouseEventArgs | TouchEventArgs} evt ?\n   * @returns {void} ?\n   */\n\n\n  Touch.prototype.tapHoldEvent = function (evt) {\n    this.tapCount = 0;\n    this.touchAction = true;\n    var eTapArgs;\n    EventHandler.remove(this.element, Browser.touchMoveEvent, this.moveEvent);\n    EventHandler.remove(this.element, Browser.touchEndEvent, this.endEvent); // eslint-disable-next-line\n\n    eTapArgs = {\n      originalEvent: evt\n    };\n    this.trigger('tapHold', eTapArgs);\n    EventHandler.remove(this.element, Browser.touchCancelEvent, this.cancelEvent);\n  };\n\n  Touch.prototype.calcPoints = function (evt) {\n    var point = this.updateChangeTouches(evt);\n    this.defaultArgs = {\n      originalEvent: evt\n    };\n    this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.startPoint.clientX));\n    this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.startPoint.clientY));\n\n    if (this.distanceX > this.distanceY) {\n      this.movedDirection = point.clientX > this.startPoint.clientX ? 'Right' : 'Left';\n    } else {\n      this.movedDirection = point.clientY < this.startPoint.clientY ? 'Up' : 'Down';\n    }\n  };\n\n  Touch.prototype.calcScrollPoints = function (evt) {\n    var point = this.updateChangeTouches(evt);\n    this.defaultArgs = {\n      originalEvent: evt\n    };\n    this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.lastMovedPoint.clientX));\n    this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.lastMovedPoint.clientY));\n\n    if ((this.distanceX > this.distanceY || this.hScrollLocked === true) && this.vScrollLocked === false) {\n      this.scrollDirection = point.clientX > this.lastMovedPoint.clientX ? 'Right' : 'Left';\n      this.hScrollLocked = true;\n    } else {\n      this.scrollDirection = point.clientY < this.lastMovedPoint.clientY ? 'Up' : 'Down';\n      this.vScrollLocked = true;\n    }\n  };\n\n  Touch.prototype.getVelocity = function (pnt) {\n    var newX = pnt.clientX;\n    var newY = pnt.clientY;\n    var newT = Date.now();\n    var xDist = newX - this.startPoint.clientX;\n    var yDist = newY - this.startPoint.clientX;\n    var interval = newT - this.tStampStart;\n    return Math.sqrt(xDist * xDist + yDist * yDist) / interval;\n  }; // eslint-disable-next-line\n\n\n  Touch.prototype.checkSwipe = function (ele, flag) {\n    var keys = ['scroll', 'offset'];\n    var temp = flag ? ['Height', 'Top'] : ['Width', 'Left'];\n\n    if (ele[keys[0] + temp[0]] <= ele[keys[1] + temp[0]]) {\n      return true;\n    }\n\n    return ele[keys[0] + temp[1]] === 0 || ele[keys[1] + temp[0]] + ele[keys[0] + temp[1]] >= ele[keys[0] + temp[0]];\n  };\n\n  Touch.prototype.updateChangeTouches = function (evt) {\n    var point = evt.changedTouches && evt.changedTouches.length !== 0 ? evt.changedTouches[0] : evt;\n    return point;\n  };\n\n  __decorate([Event()], Touch.prototype, \"tap\", void 0);\n\n  __decorate([Event()], Touch.prototype, \"tapHold\", void 0);\n\n  __decorate([Event()], Touch.prototype, \"swipe\", void 0);\n\n  __decorate([Event()], Touch.prototype, \"scroll\", void 0);\n\n  __decorate([Property(350)], Touch.prototype, \"tapThreshold\", void 0);\n\n  __decorate([Property(750)], Touch.prototype, \"tapHoldThreshold\", void 0);\n\n  __decorate([Complex({}, SwipeSettings)], Touch.prototype, \"swipeSettings\", void 0);\n\n  Touch = __decorate([NotifyPropertyChanges], Touch);\n  return Touch;\n}(Base);\n\nexport { Touch };","map":{"version":3,"sources":["C:/Users/khang/OneDrive/Tài liệu/JS/PersonalDashdoard/dashboard/node_modules/@syncfusion/ej2-react-popups/node_modules/@syncfusion/ej2-base/src/touch.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","extend","Property","Complex","NotifyPropertyChanges","Event","Browser","Base","ChildProperty","EventHandler","SwipeSettings","_super","apply","swipeRegex","Touch","element","options","_this","call","touchAction","tapCount","startEvent","evt","point","updateChangeTouches","changedTouches","undefined","isTouchMoved","movedDirection","startPoint","lastMovedPoint","clientX","clientY","startEventData","hScrollLocked","vScrollLocked","tStampStart","Date","now","timeOutTapHold","setTimeout","tapHoldEvent","tapHoldThreshold","add","touchMoveEvent","moveEvent","touchEndEvent","endEvent","touchCancelEvent","cancelEvent","movedPoint","eScrollArgs","clearTimeout","calcScrollPoints","scrollArg","startEvents","originalEvent","startX","startY","distanceX","distanceY","scrollDirection","velocity","getVelocity","trigger","timeOutTap","swipeFn","remove","tap","tapThreshold","modeclear","diffX","diffY","Math","floor","endPoint","calcPoints","swipeArgs","swipeDirection","eSwipeArgs","tDistance","swipeSettings","swipeThresholdDistance","defaultArgs","canTrigger","ele","scrollBool","isScrollable","moved","test","checkSwipe","modeClear","lastTapTime","getTime","bind","onPropertyChanged","newProp","oldProp","wireEvents","isIE","classList","destroy","unwireEvents","touchStartEvent","getModuleName","eleStyle","getComputedStyle","style","overflow","overflowX","overflowY","eTapArgs","abs","pnt","newX","newY","newT","xDist","yDist","interval","sqrt","flag","keys","temp"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { extend } from './util';\nimport { Property, Complex, NotifyPropertyChanges, Event } from './notify-property-change';\nimport { Browser } from './browser';\nimport { Base } from './base';\nimport { ChildProperty } from './child-property';\nimport { EventHandler } from './event-handler';\n/**\n * SwipeSettings is a framework module that provides support to handle swipe event like swipe up, swipe right, etc..,\n */\nvar SwipeSettings = /** @class */ (function (_super) {\n    __extends(SwipeSettings, _super);\n    function SwipeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(50)\n    ], SwipeSettings.prototype, \"swipeThresholdDistance\", void 0);\n    return SwipeSettings;\n}(ChildProperty));\nexport { SwipeSettings };\nvar swipeRegex = /(Up|Down)/;\n/**\n * Touch class provides support to handle the touch event like tap, double tap, tap hold, etc..,\n * ```typescript\n *    let node: HTMLElement;\n * let touchObj: Touch = new Touch({\n *    element: node,\n *    tap: function (e) {\n *        // tap handler function code\n *    }\n *    tapHold: function (e) {\n *        // tap hold handler function code\n *    }\n *    scroll: function (e) {\n *        // scroll handler function code\n *    }\n *    swipe: function (e) {\n *        // swipe handler function code\n *    }\n * });\n * ```\n */\nvar Touch = /** @class */ (function (_super) {\n    __extends(Touch, _super);\n    /* End-Properties */\n    function Touch(element, options) {\n        var _this = _super.call(this, options, element) || this;\n        _this.touchAction = true;\n        _this.tapCount = 0;\n        /**\n         *\n         * @param {MouseEventArgs | TouchEventArgs} evt ?\n         * @returns {void} ?\n         */\n        _this.startEvent = function (evt) {\n            if (_this.touchAction === true) {\n                var point = _this.updateChangeTouches(evt);\n                if (evt.changedTouches !== undefined) {\n                    _this.touchAction = false;\n                }\n                _this.isTouchMoved = false;\n                _this.movedDirection = '';\n                _this.startPoint = _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };\n                _this.startEventData = point;\n                _this.hScrollLocked = _this.vScrollLocked = false;\n                _this.tStampStart = Date.now();\n                _this.timeOutTapHold = setTimeout(function () { _this.tapHoldEvent(evt); }, _this.tapHoldThreshold);\n                EventHandler.add(_this.element, Browser.touchMoveEvent, _this.moveEvent, _this);\n                EventHandler.add(_this.element, Browser.touchEndEvent, _this.endEvent, _this);\n                EventHandler.add(_this.element, Browser.touchCancelEvent, _this.cancelEvent, _this);\n            }\n        };\n        /**\n         *\n         * @param {MouseEventArgs | TouchEventArgs} evt ?\n         * @returns {void} ?\n         */\n        _this.moveEvent = function (evt) {\n            var point = _this.updateChangeTouches(evt);\n            _this.movedPoint = point;\n            _this.isTouchMoved = !(point.clientX === _this.startPoint.clientX && point.clientY === _this.startPoint.clientY);\n            var eScrollArgs = {};\n            if (_this.isTouchMoved) {\n                clearTimeout(_this.timeOutTapHold);\n                _this.calcScrollPoints(evt);\n                var scrollArg = {\n                    startEvents: _this.startEventData,\n                    originalEvent: evt, startX: _this.startPoint.clientX,\n                    startY: _this.startPoint.clientY, distanceX: _this.distanceX,\n                    distanceY: _this.distanceY, scrollDirection: _this.scrollDirection,\n                    velocity: _this.getVelocity(point)\n                };\n                eScrollArgs = extend(eScrollArgs, {}, scrollArg);\n                _this.trigger('scroll', eScrollArgs);\n                _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };\n            }\n        };\n        /**\n         *\n         * @param {MouseEventArgs | TouchEventArgs} evt ?\n         * @returns {void} ?\n         */\n        _this.cancelEvent = function (evt) {\n            clearTimeout(_this.timeOutTapHold);\n            clearTimeout(_this.timeOutTap);\n            _this.tapCount = 0;\n            _this.swipeFn(evt);\n            EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);\n        };\n        /**\n         *\n         * @param {MouseEventArgs | TouchEventArgs} evt ?\n         * @returns {void} ?\n         */\n        _this.endEvent = function (evt) {\n            _this.swipeFn(evt);\n            if (!_this.isTouchMoved) {\n                if (typeof _this.tap === 'function') {\n                    _this.trigger('tap', { originalEvent: evt, tapCount: ++_this.tapCount });\n                    _this.timeOutTap = setTimeout(function () {\n                        _this.tapCount = 0;\n                    }, _this.tapThreshold);\n                }\n            }\n            _this.modeclear();\n        };\n        /**\n         *\n         * @param {MouseEventArgs | TouchEventArgs} evt ?\n         * @returns {void} ?\n         */\n        _this.swipeFn = function (evt) {\n            clearTimeout(_this.timeOutTapHold);\n            clearTimeout(_this.timeOutTap);\n            var point = _this.updateChangeTouches(evt);\n            var diffX = point.clientX - _this.startPoint.clientX;\n            var diffY = point.clientY - _this.startPoint.clientY;\n            diffX = Math.floor(diffX < 0 ? -1 * diffX : diffX);\n            diffY = Math.floor(diffY < 0 ? -1 * diffY : diffX);\n            _this.isTouchMoved = diffX > 1 || diffY > 1;\n            _this.endPoint = point;\n            _this.calcPoints(evt);\n            var swipeArgs = {\n                originalEvent: evt,\n                startEvents: _this.startEventData,\n                startX: _this.startPoint.clientX,\n                startY: _this.startPoint.clientY,\n                distanceX: _this.distanceX, distanceY: _this.distanceY, swipeDirection: _this.movedDirection,\n                velocity: _this.getVelocity(point)\n            };\n            if (_this.isTouchMoved) {\n                var eSwipeArgs = void 0;\n                var tDistance = _this.swipeSettings.swipeThresholdDistance;\n                // eslint-disable-next-line\n                eSwipeArgs = extend(eSwipeArgs, _this.defaultArgs, swipeArgs);\n                var canTrigger = false;\n                var ele = _this.element;\n                var scrollBool = _this.isScrollable(ele);\n                var moved = swipeRegex.test(_this.movedDirection);\n                if ((tDistance < _this.distanceX && !moved) || (tDistance < _this.distanceY && moved)) {\n                    if (!scrollBool) {\n                        canTrigger = true;\n                    }\n                    else {\n                        canTrigger = _this.checkSwipe(ele, moved);\n                    }\n                }\n                if (canTrigger) {\n                    _this.trigger('swipe', eSwipeArgs);\n                }\n            }\n            _this.modeclear();\n        };\n        _this.modeclear = function () {\n            _this.modeClear = setTimeout(function () {\n                _this.touchAction = true;\n            }, (typeof _this.tap !== 'function' ? 0 : 20));\n            _this.lastTapTime = new Date().getTime();\n            EventHandler.remove(_this.element, Browser.touchMoveEvent, _this.moveEvent);\n            EventHandler.remove(_this.element, Browser.touchEndEvent, _this.endEvent);\n            EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);\n        };\n        _this.bind();\n        return _this;\n    }\n    // triggers when property changed\n    /**\n     *\n     * @private\n     * @param {TouchModel} newProp ?\n     * @param {TouchModel} oldProp ?\n     * @returns {void} ?\n     */\n    // eslint-disable-next-line\n    Touch.prototype.onPropertyChanged = function (newProp, oldProp) {\n        //No Code to handle\n    };\n    Touch.prototype.bind = function () {\n        this.wireEvents();\n        if (Browser.isIE) {\n            this.element.classList.add('e-block-touch');\n        }\n    };\n    /**\n     * To destroy the touch instance.\n     *\n     * @returns {void}\n     */\n    Touch.prototype.destroy = function () {\n        this.unwireEvents();\n        _super.prototype.destroy.call(this);\n    };\n    // Need to changes the event binding once we updated the event handler.\n    Touch.prototype.wireEvents = function () {\n        EventHandler.add(this.element, Browser.touchStartEvent, this.startEvent, this);\n    };\n    Touch.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, Browser.touchStartEvent, this.startEvent);\n    };\n    /**\n     * Returns module name as touch\n     *\n     * @returns {string} ?\n     * @private\n     */\n    Touch.prototype.getModuleName = function () {\n        return 'touch';\n    };\n    /**\n     * Returns if the HTML element is Scrollable.\n     *\n     * @param {HTMLElement} element - HTML Element to check if Scrollable.\n     * @returns {boolean} ?\n     */\n    Touch.prototype.isScrollable = function (element) {\n        var eleStyle = getComputedStyle(element);\n        var style = eleStyle.overflow + eleStyle.overflowX + eleStyle.overflowY;\n        if ((/(auto|scroll)/).test(style)) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     *\n     * @param {MouseEventArgs | TouchEventArgs} evt ?\n     * @returns {void} ?\n     */\n    Touch.prototype.tapHoldEvent = function (evt) {\n        this.tapCount = 0;\n        this.touchAction = true;\n        var eTapArgs;\n        EventHandler.remove(this.element, Browser.touchMoveEvent, this.moveEvent);\n        EventHandler.remove(this.element, Browser.touchEndEvent, this.endEvent);\n        // eslint-disable-next-line\n        eTapArgs = { originalEvent: evt };\n        this.trigger('tapHold', eTapArgs);\n        EventHandler.remove(this.element, Browser.touchCancelEvent, this.cancelEvent);\n    };\n    Touch.prototype.calcPoints = function (evt) {\n        var point = this.updateChangeTouches(evt);\n        this.defaultArgs = { originalEvent: evt };\n        this.distanceX = Math.abs((Math.abs(point.clientX) - Math.abs(this.startPoint.clientX)));\n        this.distanceY = Math.abs((Math.abs(point.clientY) - Math.abs(this.startPoint.clientY)));\n        if (this.distanceX > this.distanceY) {\n            this.movedDirection = (point.clientX > this.startPoint.clientX) ? 'Right' : 'Left';\n        }\n        else {\n            this.movedDirection = (point.clientY < this.startPoint.clientY) ? 'Up' : 'Down';\n        }\n    };\n    Touch.prototype.calcScrollPoints = function (evt) {\n        var point = this.updateChangeTouches(evt);\n        this.defaultArgs = { originalEvent: evt };\n        this.distanceX = Math.abs((Math.abs(point.clientX) - Math.abs(this.lastMovedPoint.clientX)));\n        this.distanceY = Math.abs((Math.abs(point.clientY) - Math.abs(this.lastMovedPoint.clientY)));\n        if ((this.distanceX > this.distanceY || this.hScrollLocked === true) && this.vScrollLocked === false) {\n            this.scrollDirection = (point.clientX > this.lastMovedPoint.clientX) ? 'Right' : 'Left';\n            this.hScrollLocked = true;\n        }\n        else {\n            this.scrollDirection = (point.clientY < this.lastMovedPoint.clientY) ? 'Up' : 'Down';\n            this.vScrollLocked = true;\n        }\n    };\n    Touch.prototype.getVelocity = function (pnt) {\n        var newX = pnt.clientX;\n        var newY = pnt.clientY;\n        var newT = Date.now();\n        var xDist = newX - this.startPoint.clientX;\n        var yDist = newY - this.startPoint.clientX;\n        var interval = newT - this.tStampStart;\n        return Math.sqrt(xDist * xDist + yDist * yDist) / interval;\n    };\n    // eslint-disable-next-line\n    Touch.prototype.checkSwipe = function (ele, flag) {\n        var keys = ['scroll', 'offset'];\n        var temp = flag ? ['Height', 'Top'] : ['Width', 'Left'];\n        if ((ele[keys[0] + temp[0]] <= ele[keys[1] + temp[0]])) {\n            return true;\n        }\n        return (ele[keys[0] + temp[1]] === 0) ||\n            (ele[keys[1] + temp[0]] + ele[keys[0] + temp[1]] >= ele[keys[0] + temp[0]]);\n    };\n    Touch.prototype.updateChangeTouches = function (evt) {\n        var point = evt.changedTouches && evt.changedTouches.length !== 0 ? evt.changedTouches[0] : evt;\n        return point;\n    };\n    __decorate([\n        Event()\n    ], Touch.prototype, \"tap\", void 0);\n    __decorate([\n        Event()\n    ], Touch.prototype, \"tapHold\", void 0);\n    __decorate([\n        Event()\n    ], Touch.prototype, \"swipe\", void 0);\n    __decorate([\n        Event()\n    ], Touch.prototype, \"scroll\", void 0);\n    __decorate([\n        Property(350)\n    ], Touch.prototype, \"tapThreshold\", void 0);\n    __decorate([\n        Property(750)\n    ], Touch.prototype, \"tapHoldThreshold\", void 0);\n    __decorate([\n        Complex({}, SwipeSettings)\n    ], Touch.prototype, \"swipeSettings\", void 0);\n    Touch = __decorate([\n        NotifyPropertyChanges\n    ], Touch);\n    return Touch;\n}(Base));\nexport { Touch };\n"]},"metadata":{},"sourceType":"module"}